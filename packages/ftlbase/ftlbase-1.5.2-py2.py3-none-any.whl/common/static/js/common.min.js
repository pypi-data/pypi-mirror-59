$.ajaxSetup({beforeSend:function(b,a){if(!this.crossDomain){csrftoken=getCookie("csrftoken");b.setRequestHeader("HTTP_X_CSRFTOKEN",csrftoken);b.setRequestHeader("X-CSRFToken",csrftoken)}}});function showWorkflow(b,d,a){var g=document.getElementById("id_main-"+d);var f,h,c;if(g.type==="select-one"){f=g.options[g.selectedIndex].value;h=g.options[g.selectedIndex].text;c="/"+f}ftl_modal(f,"7","/common/workflow/process_graph/"+f+"/",h,a)}function ftl_modal(c,a,d,e,b){if(b===undefined){b="modal-lg"}ftl_modal_mount=riot.mount("div#ftl-modal","ftl-modal",{modal:{isvisible:false,contextmenu:false,cls:b},data:{pk:c,acao:a,acaoURL:d,modaltitle:e}})}function changeUF2(l,f){if(l.selectedIndex<0){return}var m=l.options[l.selectedIndex].value;var g=l.getAttribute("data-app_label");var d=l.getAttribute("data-object_name");var c="id_";var h=l.id.lastIndexOf("-");if(h>=0){c=l.id.substring(0,l.id.lastIndexOf("-")+1)}var e=c+"municipio";if(m!==""){var j=l.closest("div[class^='tab-pane active']");var i=$(j);var k=i.find('select[id="'+e+'"]');k.attr("disabled",true).html('<option value="">Aguarde...</option>');k.load("/cliente/municipio/ajax/"+m+"/"+g+"/"+d+"/",null,function(){k[0].disabled=false;if(f!==""){$("#"+e).val(f)}})}else{jQuery(e).html('<option value="">--</option>')}}function changeUF(a){changeUF2(a,"")}function changeCEP(l){var h=$(l).val().replace(/\D/g,"");if(h!==""){var m=/^[0-9]{8}$/;if(m.test(h)){var c="id_";var g=l.id.lastIndexOf("-");if(g>=0){c=l.id.substring(0,l.id.lastIndexOf("-")+1)}var k=l.closest("div[class^='tab-pane active']");var j=$(k);var f=j.find('input[id="'+c+'endereco"]');var i=j.find('input[id="'+c+'bairro"]');var e=j.find('select[id="'+c+'estado"]');var d=j.find('select[id="'+c+'municipio"]');f.val("...");i.val("...");e[0].value="";d[0].value="";$.getJSON("//viacep.com.br/ws/"+h+"/json/unicode/?callback=?",function(a){if(!("erro" in a)){f.val(a.logradouro);i.val(a.bairro);e[0].value=a.uf;changeUF2(e[0],a.ibge);d[0].value=a.ibge}else{limpa_formulario_cep();alert("CEP não encontrado.")}})}else{limpa_formulario_cep();alert("Formato de CEP inválido.")}}else{limpa_formulario_cep()}}function changeContaDestino(g,i){var c="#id_"+i;var f=g.options[g.selectedIndex].value;if(f!==""){var e=g.getAttribute("data-app_label");var b=g.getAttribute("data-object_name");var d=$("#planodecontas").val();var a="/"+e+"/ajax"+b+"Select/"+d+"/"+f+"/"+e+"/"+b+"/";var h=jQuery(c);h.attr("disabled",true).html('<option value="">Aguarde...</option>');h.load(a,null,function(){h[0].disabled=false;$(c).prepend('<option value="" selected>---------</option>')})}else{jQuery(c).html('<option value="">--</option>')}}function changeContaOrigemProvisao(a,b,c){changeContaDestino(a,b);changeContaDestino(a,c)}function limpa_formulario_cep(){$("#id_endereco").val("");$("#id_bairro").val("")}function getCookie(a){var e=null;if(document.cookie&&document.cookie!==""){var d=document.cookie.split(";");for(var c=0;c<d.length;c++){var b=jQuery.trim(d[c]);if(b.substring(0,a.length+1)===(a+"=")){e=decodeURIComponent(b.substring(a.length+1));break}}}return e}var csrftoken=getCookie("csrftoken");function csrfSafeMethod(a){return(/^(GET|HEAD|OPTIONS|TRACE)$/.test(a))}function configuraCampos(a,b){var c=$(".disableMe");var d=$(".disableMe select[data-autocomplete-light-function='select2']");if(a){c.removeProp("disabled");c.prop("disabled","disabled");c.filter();c.has(".has-error").removeProp("disabled");d.removeProp("disabled");d.prop("disabled","disabled");d.filter();d.has(".has-error").removeProp("disabled");$("div[id*=__prefix__]").find(".disableMe").removeProp("disabled");if(b){$('input[name="save"]').hide()}}else{c.removeProp("disabled")}if(b){$('a[id^="add-item-button"]').hide()}$("form").each(function(){$(this).submit(function(){$(":disabled").removeProp("disabled")})})}function configuraPagina(){$(".js-django-inlines").each(function(){var b=$(this);var a=b.data();a.options.onAdd=function(d,c){configuraPagina()};b.djangoInline(a.options||a)});$.fn.datepicker.defaults.format="dd/mm/yyyy";$.fn.datepicker.defaults.todayBtn="linked";$.fn.datepicker.defaults.language="pt-BR";$.fn.datepicker.defaults.autoclose=true;$.fn.datepicker.defaults.todayHighlight=true;$.fn.datepicker.defaults.enableOnReadonly=true;$("#datepicker").datepicker({});$(".dateinput").datepicker({});$("div .has-error").filter(".form-group").has($('div[id^="detail-items-"]')).removeClass("has-error");$("[data-ftl='data']").mask("99/99/9999",{placeholder:"dd/mm/aaaa"});$("[data-ftl='telefone']").mask("(99) 9999-999?9");$("[data-ftl='celular']").mask("(99) 99999-999?9");$("[data-ftl='cpf']").mask("999.999.999-99");$("[data-ftl='cnpj']").mask("99.999.999/9999-99");$("[data-ftl='cep']").mask("99999-999");$('form input:not([type="hidden"]):not([type="submit"])').keydown(function(b){if(b.key==="Enter"){var a=$(this).parents("form").eq(0).find(":input");if(a[a.index(this)+1]!==null){a[a.index(this)+1].focus()}b.preventDefault();return false}});$(".tab-content .panel-body").each(function(){$(this).find(".buttons-do-form").appendTo($(this).parent().find("#master-button"))});$(".summernote").not("[id*='__prefix__']").summernote({toolbar:[["style",["style"]],["font",["bold","underline","italic","strikethrough","superscript","subscript","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","listStyles","paragraph","height"]],["table",["table"]],["insert",["link","picture","video","hr"]],["view",["fullscreen","codeview","help"]],],placeholder:"Conteúdo em HTML",tabsize:2,height:100});$(".tooltip").remove();$(".dal-forward-conf").not("[id*='__prefix__']").each(function(){var f=this.id.replace("dal-forward-conf-for-","#");var d=$(f);var b=d.getFormPrefix();var a;try{a=JSON.parse($(this).text())}catch(c){return}a.forEach(function(e){$("[name="+b+e.src+"]").on("change",function(){d.val(null).trigger("change")})})})}var rotas=[];function configuraFTL(){moment.locale("pt-br");configuraPagina();var c=window.location;var d=$('li a[href="'+c.pathname+'"]');if(d.length>0){d.parent().addClass("active");$("ul.treeview-menu").filter(function(a){return $("a[href^='"+c.pathname+"']",this).length===1}).addClass("active").css("display","block")}else{if(document.referrer){var b=document.referrer.match(/:\/\/[^\/]+([^\?]*)[\/]*(?:\?.*)?$/)[1];if($('li a[href^="'+b+'"]').length>0){$('li a[href="'+b+'"]').parent().addClass("active");$("ul.treeview-menu").filter(function(a){return $("a[href^='"+b+"']",this).length===1}).addClass("active").css("display","block")}}}ftltabs=riot.mount("ftl-tabs")[0];route("/..",function(e){var a=window.location;var f=a.hash.slice(1);rotas.forEach(function(i,g){if(i.rota===f.slice(0,i.rota.length)){var h="";if(a.hash.endsWith("/add/")){h="Inclusão"}else{if(a.hash.split("/")[4]==="2"){h="Alteração"}else{if(a.hash.split("/")[4]==="3"){h="Exclusão"}}}ftltabs.trigger("updateRoute",g,i.nome,f,h,i.reload)}})});route.start(true)};