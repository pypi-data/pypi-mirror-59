Metadata-Version: 2.1
Name: aiosonic
Version: 0.5.3
Summary: Async http client
Home-page: UNKNOWN
Author: Johanderson Mogollon
Author-email: johanderson@mogollon.com.ve
License: MIT
Platform: UNKNOWN
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Developers
Classifier: Topic :: Software Development
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3.6
Classifier: Programming Language :: Python :: 3.7
Description-Content-Type: text/markdown
Requires-Dist: chardet (==3.0.4)
Requires-Dist: h2 (==3.1.1)
Requires-Dist: hpack (==3.0.0)
Requires-Dist: hyperframe (==5.2.0)
Provides-Extra: test
Requires-Dist: aiohttp (==3.6.2) ; extra == 'test'
Requires-Dist: asgiref (==3.2.3) ; extra == 'test'
Requires-Dist: async-timeout (==3.0.1) ; extra == 'test'
Requires-Dist: attrs (==19.3.0) ; extra == 'test'
Requires-Dist: certifi (==2019.11.28) ; extra == 'test'
Requires-Dist: chardet (==3.0.4) ; extra == 'test'
Requires-Dist: click (==7.0) ; extra == 'test'
Requires-Dist: coverage (==5.0.2) ; extra == 'test'
Requires-Dist: coveralls (==1.10.0) ; extra == 'test'
Requires-Dist: django (==3.0.2) ; extra == 'test'
Requires-Dist: docopt (==0.6.2) ; extra == 'test'
Requires-Dist: entrypoints (==0.3) ; extra == 'test'
Requires-Dist: flake8 (==3.7.9) ; extra == 'test'
Requires-Dist: h11 (==0.9.0) ; extra == 'test'
Requires-Dist: h2 (==3.1.1) ; extra == 'test'
Requires-Dist: hpack (==3.0.0) ; extra == 'test'
Requires-Dist: hstspreload (==2020.1.7) ; extra == 'test'
Requires-Dist: httpx (==0.11.0) ; extra == 'test'
Requires-Dist: hyperframe (==5.2.0) ; extra == 'test'
Requires-Dist: idna (==2.8) ; extra == 'test'
Requires-Dist: importlib-metadata (==1.4.0) ; extra == 'test'
Requires-Dist: mccabe (==0.6.1) ; extra == 'test'
Requires-Dist: more-itertools (==8.1.0) ; extra == 'test'
Requires-Dist: multidict (==4.7.4) ; extra == 'test'
Requires-Dist: mypy-extensions (==0.4.3) ; extra == 'test'
Requires-Dist: mypy (==0.761) ; extra == 'test'
Requires-Dist: packaging (==20.0) ; extra == 'test'
Requires-Dist: pluggy (==0.13.1) ; extra == 'test'
Requires-Dist: py (==1.8.1) ; extra == 'test'
Requires-Dist: pycodestyle (==2.5.0) ; extra == 'test'
Requires-Dist: pyflakes (==2.1.1) ; extra == 'test'
Requires-Dist: pyparsing (==2.4.6) ; extra == 'test'
Requires-Dist: pytest-aiohttp (==0.3.0) ; extra == 'test'
Requires-Dist: pytest-asyncio (==0.10.0) ; extra == 'test'
Requires-Dist: pytest-cov (==2.8.1) ; extra == 'test'
Requires-Dist: pytest-django (==3.7.0) ; extra == 'test'
Requires-Dist: pytest-flake8 (==1.0.4) ; extra == 'test'
Requires-Dist: pytest-mock (==2.0.0) ; extra == 'test'
Requires-Dist: pytest-mypy (==0.4.2) ; extra == 'test'
Requires-Dist: pytest-sugar (==0.9.2) ; extra == 'test'
Requires-Dist: pytest (==5.3.2) ; extra == 'test'
Requires-Dist: pytz (==2019.3) ; extra == 'test'
Requires-Dist: requests (==2.22.0) ; extra == 'test'
Requires-Dist: rfc3986 (==1.3.2) ; extra == 'test'
Requires-Dist: six (==1.13.0) ; extra == 'test'
Requires-Dist: sniffio (==1.1.0) ; extra == 'test'
Requires-Dist: sqlparse (==0.3.0) ; extra == 'test'
Requires-Dist: termcolor (==1.1.0) ; extra == 'test'
Requires-Dist: typed-ast (==1.4.0) ; extra == 'test'
Requires-Dist: typing-extensions (==3.7.4.1) ; extra == 'test'
Requires-Dist: urllib3 (==1.25.7) ; extra == 'test'
Requires-Dist: uvicorn (==0.11.1) ; extra == 'test'
Requires-Dist: wcwidth (==0.1.8) ; extra == 'test'
Requires-Dist: websockets (==8.1) ; extra == 'test'
Requires-Dist: yarl (==1.4.2) ; extra == 'test'
Requires-Dist: zipp (==0.6.0) ; extra == 'test'
Requires-Dist: httptools (==0.0.13) ; (sys_platform != "win32" and sys_platform != "cygwin" and platform_python_implementation != "pypy") and extra == 'test'
Requires-Dist: uvloop (==0.14.0) ; (sys_platform != "win32" and sys_platform != "cygwin" and platform_python_implementation != "pypy") and extra == 'test'

[![Build Status](https://travis-ci.org/sonic182/aiosonic.svg?branch=master)](https://travis-ci.org/sonic182/aiosonic)
[![Azure Build Status](https://dev.azure.com/johander-182/aiosonic/_apis/build/status/sonic182.aiosonic?branchName=master)](https://dev.azure.com/johander-182/aiosonic/_build/latest?definitionId=1&branchName=master)
[![Coverage Status](https://coveralls.io/repos/github/sonic182/aiosonic/badge.svg?branch=master)](https://coveralls.io/github/sonic182/aiosonic?branch=master)
[![PyPI version](https://badge.fury.io/py/aiosonic.svg)](https://badge.fury.io/py/aiosonic)
[![Documentation Status](https://readthedocs.org/projects/aiosonic/badge/?version=latest)](https://aiosonic.readthedocs.io/en/latest/?badge=latest)
# aiosonic

Fastest Python async http client

Here is some [documentation](https://aiosonic.readthedocs.io/en/latest/).

There is a performance script in tests folder which shows very nice numbers

```
Â» python ./tests/performance.py
doing tests...
httpx did break with: [Errno 24] Too many open files
{
 "aiosonic": "1000 requests in 146.89 ms",
 "aiosonic cyclic": "1000 requests in 146.17 ms",
 "aiohttp": "1000 requests in 319.42 ms",
 "requests": "1000 requests in 1766.96 ms"
}
aiosonic is 117.46% faster than aiohttp
aiosonic is 1102.93% faster than requests
aiosonic is -0.49% faster than aiosonic cyclic
```

You can perform this test by installing all test dependencies with `pip install -e ".[test]"` and doing `python tests/performance.py` in your own machine

# Requirements:

* Python>=3.6


# Features:

* Keepalive and smart pool of connections
* Multipart File Uploads
* Chunked responses handling
* Chunked requests
* Connection Timeouts
* Automatic Decompression
* Follow Redirects
* Fully type annotated.
* 100% test coverage.

# Installation

`pip install aiosonic`

# Usage

```python
import asyncio
import aiosonic
import json


async def run():
    """Start."""
    # Sample get request
    response = await aiosonic.get('https://www.google.com/')
    assert response.status_code == 200
    assert 'Google' in (await response.text())

    url = "https://postman-echo.com/post"
    posted_data = {'foo': 'bar'}

    # post data as multipart form
    response = await aiosonic.post(url, data=posted_data)

    assert response.status_code == 200
    data = json.loads(await response.content())
    assert data['form'] == posted_data

    # posted as json
    response = await aiosonic.post(url, json=posted_data)

    assert response.status_code == 200
    data = json.loads(await response.content())
    assert data['json'] == posted_data

    # Sample get request + timeout
    from aiosonic.timeout import Timeouts
    timeouts = Timeouts(
        sock_read=10,
        sock_connect=3
    )
    response = await aiosonic.get('https://www.google.com/', timeouts=timeouts)
    assert response.status_code == 200
    assert 'Google' in (await response.text())

    print('success')


if __name__ == '__main__':
    loop = asyncio.get_event_loop()
    loop.run_until_complete(run())
```

# TODO

* HTTP2
  * [x] Get
  * [ ] Request with data sending
* Better documentation
* International Domains and URLs (idna + cache)
* Requests using a http proxy
* Sessions with Cookie Persistence
* Basic/Digest Authentication
* Elegant Key/Value Cookies

# Development

Install packages with pip-tools:
```bash
pip install pip-tools
pip-compile
pip-compile test-requirements.in
pip-sync requirements.txt test-requirements.txt
```

# Contribute

1. Fork
2. create a branch `feature/your_feature`
3. commit - push - pull request

Thanks :)

