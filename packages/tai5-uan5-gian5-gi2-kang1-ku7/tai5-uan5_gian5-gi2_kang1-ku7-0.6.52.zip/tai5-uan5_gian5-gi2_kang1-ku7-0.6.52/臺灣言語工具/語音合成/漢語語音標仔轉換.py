# -*- coding: utf-8 -*-
from 臺灣言語工具.語音合成.語音標仔轉換 import 語音標仔轉換

# 前音-此音+後音/調：調類/詞：第幾字!上尾第幾字@攏總字/句：第幾詞^上尾第幾詞_攏總詞


class 漢語語音標仔轉換(語音標仔轉換):

    @classmethod
    def _句物件轉合成前置資料(cls, 句物件):
        詞陣列 = 句物件.網出詞物件()
        攏總詞數量 = len(詞陣列)
        全部詞資料 = []
        全部字資料 = []
        全部聲韻資料 = []
        for 句中第幾詞, 詞物件 in enumerate(詞陣列):
            字陣列 = 詞物件.篩出字物件()
            攏總字數量 = len(字陣列)
            for 詞中第幾字, 字物件 in enumerate(字陣列):
                try:
                    聲, 韻, 調 = 字物件.音
                    全部聲韻資料.append((聲, len(全部字資料)))
                    全部聲韻資料.append((韻, len(全部字資料)))
                except ValueError:
                    調 = cls.免知
                    全部聲韻資料.append((cls.恬音, len(全部字資料)))
                全部字資料.append((調, 詞中第幾字, 攏總字數量, len(全部詞資料)))
            全部詞資料.append((句中第幾詞, 攏總詞數量))
        return 全部聲韻資料, 全部字資料, 全部詞資料
