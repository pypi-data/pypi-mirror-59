!function(n){n.fn.rowReordering=function(t){function e(n,t,e,i,o){t.sortable("cancel"),i<=e.iLogLevel&&(void 0!=o?e.fnAlert(o,""):e.fnAlert("Row cannot be moved","")),e.fnEndProcessingMode(n)}function i(t,e,i){var o,r=n("#"+i,t),a=t.fnGetData(r[0],s.iIndexColumn),u=-1,d=r.prev(e);if(d.length>0)(u=parseInt(t.fnGetData(d[0],s.iIndexColumn)))<a&&(u+=1);else{var f=r.next(e);f.length>0&&(u=parseInt(t.fnGetData(f[0],s.iIndexColumn)))>a&&(u-=1)}return o=u<a?"back":"forward",{sDirection:o,iCurrentPosition:a,iNewPosition:u}}function o(t,e,i,o,r,a,u){var d=i,f=o;"back"==r&&(d=o,f=i),n(t.fnGetNodes()).each(function(){if(""==u||n(this).attr("data-group")==u){var e=this,i=parseInt(t.fnGetData(e,s.iIndexColumn));d<=i&&i<=f&&(e.id==a?t.fnUpdate(o,t.fnGetPosition(e),s.iIndexColumn,!1):"back"==r?t.fnUpdate(i+1,t.fnGetPosition(e),s.iIndexColumn,!1):t.fnUpdate(i-1,t.fnGetPosition(e),s.iIndexColumn,!1))}});var c=t.fnSettings();if(!1===c.oFeatures.bServerSide){var l=c._iDisplayStart;c.oApi._fnReDraw(c),c._iDisplayStart=l,c.oApi._fnCalculateEnd(c)}c.oApi._fnDraw(c)}var r={iIndexColumn:0,iStartPosition:1,sURL:null,sRequestType:"POST",iGroupingLevel:0,fnAlert:function(n,t){alert(n)},fnSuccess:jQuery.noop,iLogLevel:1,sDataGroupAttribute:"data-group",fnStartProcessingMode:function(t){t.fnSettings().oFeatures.bProcessing&&n(".dataTables_processing").css("visibility","visible")},fnEndProcessingMode:function(t){t.fnSettings().oFeatures.bProcessing&&n(".dataTables_processing").css("visibility","hidden")},fnUpdateAjaxRequest:jQuery.noop},s=n.extend(r,t),a=function(t,e){var i=e.children(),o=e.clone();return o.children().each(function(t){n(this).width(i.eq(t).width())}),o};return this.each(function(){var t=n(this).dataTable(),r=null==t.fnSettings().aaSortingFixed?new Array:t.fnSettings().aaSortingFixed;r.push([s.iIndexColumn,"asc"]),t.fnSettings().aaSortingFixed=r;for(var u=0;u<t.fnSettings().aoColumns.length;u++)t.fnSettings().aoColumns[u].bSortable=!1;t.fnDraw(),n("tbody",t).disableSelection().sortable({cursor:"move",helper:a,update:function(r,a){var u=t,d=n(this),f="tbody tr",c="";if(s.bGroupingUsed){if(null==(c=n(a.item).attr(s.sDataGroupAttribute))||void 0==c)return void e(u,d,s,3,"Grouping row cannot be moved");f="tbody tr["+s.sDataGroupAttribute+" ='"+c+"']"}var l=i(u,f,a.item.context.id);if(-1!=l.iNewPosition)if(null!=s.sURL){s.fnStartProcessingMode(u);var p={url:s.sURL,type:s.sRequestType,data:{id:a.item.context.id,fromPosition:l.iCurrentPosition,toPosition:l.iNewPosition,direction:l.sDirection,group:c},success:function(n){s.fnSuccess(n),o(u,0,l.iCurrentPosition,l.iNewPosition,l.sDirection,a.item.context.id,c),s.fnEndProcessingMode(u)},error:function(n){e(u,d,s,1,n.statusText)}};s.fnUpdateAjaxRequest(p,s,u),n.ajax(p)}else o(u,0,l.iCurrentPosition,l.iNewPosition,l.sDirection,a.item.context.id,c);else e(u,d,s,2)}})})}}(jQuery);
