webpackJsonpexports([26],{1596:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"default",function(){return P});var i=n(27),l=n(9),c=n(0),u=n.n(c),s=n(5),p=n(2),f=n(182),d=n(92),h=n(18),b=n(26),y=n(178),m=n(63),v=n(602),g=n(603),O=n(30),j=n(52),E=n(213),w=n(81),k=n(1645),S=n(1729),_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),T=Object(s.default)("div",{target:"eau6a2k0"})("font-size:1.3em;"),I=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),x(t,[{key:"getEndpoints",value:function(){var e=Math.floor((new Date).getTime()/1e3),t=e-2592e3,n=this.props.params,r=n.hookId;return[["stats","/projects/"+n.orgId+"/"+n.projectId+"/hooks/"+r+"/stats/",{query:{since:t,until:e,resolution:"1d"}}]]}},{key:"renderTooltip",value:function(e,t,n){return'<div style="width:150px"><div class="time-label">'+n.getTimeLabel(e)+'</div><div class="value-label">'+C(e.y,1)[0].toLocaleString()+" events</div></div>"}},{key:"renderBody",value:function(){var e=!0,t=this.state.stats.map(function(t){return t.total&&(e=!1),{x:t.ts,y:[t.total]}});return u.a.createElement(h.a,null,u.a.createElement(h.e,null,Object(p.t)("Events in the last 30 days (by day)")),u.a.createElement(h.c,null,e?u.a.createElement(y.a,{className:Object(i.css)({flexDirection:"column",alignItems:"center"})},u.a.createElement(T,null,Object(p.t)("Nothing recorded in the last 30 days.")),u.a.createElement(w.default,{className:Object(i.css)({marginBottom:0})},Object(p.t)("Total webhooks fired for this configuration."))):u.a.createElement(E.default,{points:t,height:150,label:"events",barClasses:["total"],className:"standard-barchart",style:{border:"none"},tooltip:this.renderTooltip})))}}]),t}(f.default),P=function(e){function t(){var e,n,a,i;r(this,t);for(var c=arguments.length,u=Array(c),s=0;s<c;s++)u[s]=arguments[s];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.onDelete=function(){var e=a.props.params,t=e.orgId,n=e.projectId,r=e.hookId,o=O.default.add(Object(p.t)("Saving changes.."));a.api.request("/projects/"+t+"/"+n+"/hooks/"+r+"/",{method:"DELETE",success:function(){O.default.remove(o),l.browserHistory.push("/settings/"+t+"/"+n+"/hooks/")},error:function(){O.default.remove(o),O.default.add(Object(p.t)("Unable to remove application. Please try again."),"error",{duration:3e3})}})},i=n,o(a,i)}return a(t,e),x(t,[{key:"getEndpoints",value:function(){var e=this.props.params;return[["hook","/projects/"+e.orgId+"/"+e.projectId+"/hooks/"+e.hookId+"/"]]}},{key:"renderBody",value:function(){var e=this.props.params,t=e.orgId,n=e.projectId,r=e.hookId,o=this.state.hook;return u.a.createElement("div",null,u.a.createElement(j.default,{title:Object(p.t)("Service Hook Details")}),u.a.createElement(m.default,null,u.a.createElement(I,{params:this.props.params})),u.a.createElement(S.a,_({},this.props,{orgId:t,projectId:n,hookId:r,initialData:_({},o,{isActive:"disabled"!=o.status})})),u.a.createElement(h.a,null,u.a.createElement(h.e,null,Object(p.t)("Event Validation")),u.a.createElement(h.c,null,u.a.createElement(h.b,{type:"info",icon:"icon-circle-exclamation",m:0,mb:0},"Sentry will send the ",u.a.createElement("code",null,"X-ServiceHook-Signature")," header built using"," ",u.a.createElement("code",null,"HMAC(SHA256, [secret], [payload])"),". You should always verify this signature before trusting the information provided in the webhook."),u.a.createElement(v.a,{label:Object(p.t)("Secret"),flexibleControlStateSize:!0,inline:!1,help:Object(p.t)("The shared secret used for generating event HMAC signatures.")},u.a.createElement(k.a,null,Object(g.a)({value:o.secret,fixed:"a dynamic secret value"}))))),u.a.createElement(h.a,null,u.a.createElement(h.e,null,Object(p.t)("Delete Hook")),u.a.createElement(h.c,null,u.a.createElement(v.a,{label:Object(p.t)("Delete Hook"),help:Object(p.t)("Removing this hook is immediate and permanent.")},u.a.createElement("div",null,u.a.createElement(b.default,{priority:"danger",onClick:this.onDelete},"Delete Hook"))))))}}]),t}(d.default)},1645:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,l,c=n(14),u=n(1),s=n.n(u),p=n(0),f=n.n(p),d=n(31),h=n.n(d),b=n(5),y=n(389),m=n(390),v=n(26),g=n(604),O=n(24),j=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E=Object(b.default)(function(e){return f.a.createElement("input",e)},{target:"e1usehz70"})(y.a,";background-color:",function(e){return e.theme.offWhite},";border-right-width:0;border-top-right-radius:0;border-bottom-right-radius:0;&:hover,&:focus{background-color:",function(e){return e.theme.offWhite},";border-right-width:0;}"),w=Object(b.default)("div",{target:"e1usehz71"})("flex-grow:1;border:none;"),k=Object(b.default)(v.default,{target:"e1usehz72"})("flex-shrink:1;border-radius:0 0.25em 0.25em 0;box-shadow:none;"),S=(l=i=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleCopyClick=function(e){if(n.textRef){var t=n.props.onCopy;n.handleSelectText(),t(n.props.children,e),e.stopPropagation()}},n.handleSelectText=function(){n.textRef&&Object(m.a)(h.a.findDOMNode(n.textRef))},n.handleAutoMount=function(e){n.textRef=e},n}return a(t,e),j(t,[{key:"render",value:function(){var e=this.props,t=e.style,n=e.children;return f.a.createElement(c.Flex,null,f.a.createElement(w,null,f.a.createElement(E,{readOnly:!0,ref:this.handleAutoMount,style:t,value:n,onClick:this.handleSelectText})),f.a.createElement(g.a,{hideUnsupported:!0,onClick:this.handleCopyClick,value:n},f.a.createElement(k,{type:"button",size:"xsmall",onClick:this.handleCopyClick},f.a.createElement(O.a,{src:"icon-clipboard",size:"1.25em"}))))}}]),t}(f.a.Component),i.propTypes={children:s.a.string.isRequired,style:s.a.object,onCopy:s.a.func},i.defaultProps={onCopy:function(){}},l);t.a=S},1704:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return g});var l,c,u=n(1),s=n.n(u),p=n(0),f=n.n(p),d=n(46),h=n(30),b=n(600),y=n(2),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=(c=l=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.onSubmit=function(e,t,n){r.props.onSubmit&&r.props.onSubmit(e);var o=h.default.add(Object(y.t)("Saving changes.."));r.api.request(r.props.apiEndpoint,{method:r.props.apiMethod,data:e,success:function(){h.default.remove(o),t.apply(void 0,arguments)},error:function(){h.default.remove(o),n.apply(void 0,arguments)}})},r.api=new d.Client,r}return i(t,e),v(t,[{key:"componentWillUnmount",value:function(){this.api.clear()}},{key:"render",value:function(){var e=this.props,t=(e.onSubmit,e.apiMethod,e.apiEndpoint,r(e,["onSubmit","apiMethod","apiEndpoint"]));return f.a.createElement(b.a,m({onSubmit:this.onSubmit},t))}}]),t}(f.a.Component),l.propTypes=m({},b.a.propTypes,{onSubmit:s.a.func,apiMethod:s.a.string.isRequired,apiEndpoint:s.a.string.isRequired}),c)},1705:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return j});var l,c,u=n(14),s=n(1),p=n.n(s),f=n(0),d=n.n(f),h=n(5),b=n(10),y=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=Object(h.default)("div",{target:"e18jwynw0"})("display:flex;flex-wrap:wrap;"),g=Object(h.default)("label",{target:"e18jwynw1"})("font-weight:normal;white-space:nowrap;margin-right:10px;margin-bottom:10px;width:20%;"),O=Object(h.default)("span",{target:"e18jwynw2"})("margin-left:3px;"),j=(c=l=function(e){function t(){var e,n,i,l;o(this,t);for(var c=arguments.length,u=Array(c),s=0;s<c;s++)u[s]=arguments[s];return n=i=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.onChange=function(e,t){var n=i.props,o=n.value,a=n.onChange,l=void 0;"function"==typeof a&&(l=t.target.checked?o?[].concat(r(o),[e]):[o]:o.filter(function(t){return t!==e}),a(l,t))},l=n,a(i,l)}return i(t,e),m(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.disabled,r=t.choices,o=t.value;return d.a.createElement(v,null,r.map(function(t){var r=y(t,2),a=r[0],i=r[1];return d.a.createElement(u.Box,{key:a,w:[1,.5,1/3,.25]},d.a.createElement(g,null,d.a.createElement("input",{type:"checkbox",value:a,onChange:e.onChange.bind(e,a),disabled:n,checked:Object(b.d)(o)&&-1!==o.indexOf(a)}),d.a.createElement(O,null,i)))}))}}]),t}(d.a.Component),l.propTypes={value:p.a.arrayOf(p.a.oneOfType([p.a.string,p.a.number])),onChange:p.a.func,disabled:p.a.bool,choices:p.a.array.isRequired},c)},1729:function(e,t,n){"use strict";var r=n(9),o=n(0),a=n.n(o),i=n(1),l=n.n(i),c=n(3),u=n.n(c),s=n(2),p=n(1704),f=n(612),d=n(606),h=n(608),b=n(1705),y=n(18),m=["event.alert","event.created"].map(function(e){return[e,e]});t.a=u()({displayName:"ServiceHookSettingsForm",propTypes:{orgId:l.a.string.isRequired,projectId:l.a.string.isRequired,hookId:l.a.string,initialData:l.a.object.isRequired},onSubmitSuccess:function(){var e=this.props,t=e.orgId,n=e.projectId;r.browserHistory.push("/settings/"+t+"/"+n+"/hooks/")},render:function(){var e=this.props,t=e.initialData,n=e.orgId,r=e.projectId,o=e.hookId,i=o?"/projects/"+n+"/"+r+"/hooks/"+o+"/":"/projects/"+n+"/"+r+"/hooks/";return a.a.createElement(y.a,null,a.a.createElement(p.a,{apiMethod:o?"PUT":"POST",apiEndpoint:i,initialData:t,onSubmitSuccess:this.onSubmitSuccess,onCancel:this.onCancel,footerStyle:{marginTop:0,paddingRight:20},submitLabel:o?Object(s.t)("Save Changes"):Object(s.t)("Create Hook")},a.a.createElement(y.e,null,Object(s.t)("Hook Configuration")),a.a.createElement(y.c,null,a.a.createElement(f.a,{name:"isActive",label:Object(s.t)("Active")}),a.a.createElement(h.a,{name:"url",label:Object(s.t)("URL"),required:!0,help:Object(s.t)("The URL which will receive events.")}),a.a.createElement(d.a,{name:"events",choices:m,label:Object(s.t)("Events"),inline:!1,help:Object(s.t)("The event types you wish to subscribe to.")},function(e){var t=e.value,n=e.onChange;return a.a.createElement(b.a,{onChange:n,value:t.peek(),choices:m})}))))}})}});
//# sourceMappingURL=ProjectServiceHookDetails.js.map