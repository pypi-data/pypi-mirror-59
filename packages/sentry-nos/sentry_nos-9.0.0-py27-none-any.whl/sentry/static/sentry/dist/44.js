webpackJsonpexports([44],{1624:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),a.d(t,"default",function(){return f});var i=a(0),o=a.n(i),l=a(2),c=a(92),u=a(1809),p=a(1810),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),d(t,[{key:"getTitle",value:function(){return"Admin Overview"}},{key:"getEndpoints",value:function(){return[]}},{key:"renderBody",value:function(){var e=(new Date).getTime()/1e3-604800;return o.a.createElement("div",null,o.a.createElement("h3",null,Object(l.t)("System Overview")),o.a.createElement("div",{className:"box"},o.a.createElement("div",{className:"box-header"},o.a.createElement("h4",null,Object(l.t)("Event Throughput"),o.a.createElement("span",{id:"rate",className:"pull-right"}))),o.a.createElement(p.a,{since:e,resolution:"1h"})),o.a.createElement("div",{className:"box"},o.a.createElement("div",{className:"box-header"},o.a.createElement("h4",null,Object(l.t)("API Responses"))),o.a.createElement(u.a,{since:e,resolution:"1h"})))}}]),t}(c.default)},1809:function(e,t,a){"use strict";var n=a(1),r=a.n(n),s=a(0),i=a.n(s),o=a(3),l=a.n(o),c=a(8),u=a(213),p=a(15),d=a(11);t.a=l()({displayName:"apiChart",propTypes:{since:r.a.number.isRequired,resolution:r.a.string.isRequired},mixins:[c.default],getInitialState:function(){return{error:!1,loading:!0,rawData:{"client-api.all-versions.responses.2xx":null,"client-api.all-versions.responses.4xx":null,"client-api.all-versions.responses.5xx":null}}},componentWillMount:function(){this.fetchData()},componentWillReceiveProps:function(e){this.props.since!==e.since&&this.setState(this.getInitialState(),this.fetchData)},fetchData:function(){var e=this;["client-api.all-versions.responses.2xx","client-api.all-versions.responses.4xx","client-api.all-versions.responses.5xx"].forEach(function(t){e.api.request("/internal/stats/",{method:"GET",data:{since:e.props.since,resolution:e.props.resolution,key:t},success:function(a){e.setState(function(e){var n=e.rawData;return n[t]=a,{rawData:n}},e.requestFinished)},error:function(t){e.setState({error:!0})}})})},requestFinished:function(){var e=this.state.rawData;e["events.total"]&&e["events.dropped"]&&this.processOrgData(),e["client-api.all-versions.responses.2xx"]&&e["client-api.all-versions.responses.4xx"]&&e["client-api.all-versions.responses.5xx"]&&this.setState({loading:!1})},processRawSeries:function(e){return e.map(function(e){return{x:e[0],y:e[1]}})},getChartSeries:function(){var e=this.state.rawData;return[{data:this.processRawSeries(e["client-api.all-versions.responses.4xx"]),color:"rgb(86, 175, 232)",shadowSize:0,label:"4xx"},{data:this.processRawSeries(e["client-api.all-versions.responses.5xx"]),color:"rgb(244, 63, 32)",label:"5xx"},{data:this.processRawSeries(e["client-api.all-versions.responses.2xx"]),color:"rgb(78, 222, 73)",label:"2xx"}]},render:function(){return this.state.loading?i.a.createElement(d.default,null):this.state.error?i.a.createElement(p.default,{onRetry:this.fetchData}):i.a.createElement(u.default,{series:this.getChartSeries(),height:150,className:"standard-barchart"})}})},1810:function(e,t,a){"use strict";var n=a(1),r=a.n(n),s=a(0),i=a.n(s),o=a(3),l=a.n(o),c=a(8),u=a(213),p=a(15),d=a(11);t.a=l()({displayName:"eventChart",propTypes:{since:r.a.number.isRequired,resolution:r.a.string.isRequired},mixins:[c.default],getInitialState:function(){return{error:!1,loading:!0,rawData:{"events.total":null,"events.dropped":null},stats:{received:[],rejected:[]},systemTotal:{received:0,rejected:0,accepted:0}}},componentWillMount:function(){this.fetchData()},componentWillReceiveProps:function(e){this.props.since!==e.since&&this.setState(this.getInitialState(),this.fetchData)},fetchData:function(){var e=this;["events.total","events.dropped"].forEach(function(t){e.api.request("/internal/stats/",{method:"GET",data:{since:e.props.since,resolution:e.props.resolution,key:t},success:function(a){e.setState(function(e){var n=e.rawData;return n[t]=a,{rawData:n}},e.requestFinished)},error:function(t){e.setState({error:!0})}})})},requestFinished:function(){var e=this.state.rawData;e["events.total"]&&e["events.dropped"]&&this.processOrgData()},processOrgData:function(){var e=this.state.rawData,t=0,a=0,n={},r={},s=[0,0];e["events.total"].forEach(function(i,o){var l=i[1],c=e["events.dropped"][o][1],u=i[0];void 0===n[u]?(n[u]=l,r[u]=c):(n[u]+=l,r[u]+=c),t+=l,a+=c,l>0&&(s[0]+=l,s[1]+=1)}),this.setState({systemTotal:{received:t,rejected:a,accepted:t-a,avgRate:parseInt(s[0]/s[1]/60,10)},stats:{rejected:Object.keys(r).map(function(e){return{x:e,y:r[e]||null}}),accepted:Object.keys(n).map(function(e){return{x:e,y:n[e]-r[e]}})},loading:!1})},getChartSeries:function(){var e=this.state.stats;return[{data:e.accepted,label:"Accepted",color:"rgba(86, 175, 232, 1)"},{data:e.rejected,color:"rgba(244, 63, 32, 1)",label:"Dropped"}]},render:function(){return this.state.loading?i.a.createElement(d.default,null):this.state.error?i.a.createElement(p.default,{onRetry:this.fetchData}):i.a.createElement(u.default,{series:this.getChartSeries(),height:150,className:"standard-barchart"})}})}});
//# sourceMappingURL=AdminOverview.js.map