webpackJsonpexports([14],{1567:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,u,c=n(1),s=n.n(c),p=n(0),f=n.n(p),d=n(2),h=n(1772),y=n(6),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=(u=l=function(e){function t(){var e,n,r,i;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.handleSubmit=function(e){r.handleSuccess()},r.handleSuccess=function(e){r.props.onClose&&r.props.onClose(e),window.setTimeout(r.props.closeModal,2e3)},i=n,a(r,i)}return i(t,e),g(t,[{key:"render",value:function(){var e=this.props,t=e.Body,n=e.Header,o=e.closeModal,a=r(e,["Body","Header","closeModal"]);return f.a.createElement(f.a.Fragment,null,f.a.createElement(n,{closeButton:!0,onHide:o},Object(d.t)("Create Ownership Rule")),f.a.createElement(t,null,f.a.createElement(h.a,m({},a,{onSave:this.handleSuccess}))))}}]),t}(f.a.Component),l.propTypes={closeModal:s.a.func,onClose:s.a.func,Body:s.a.oneOfType([s.a.func,s.a.node]).isRequired,Header:s.a.oneOfType([s.a.func,s.a.node]).isRequired,organization:y.e.Organization.isRequired,project:y.e.Project},u);t.default=v},1717:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,l,u=n(14),c=n(1),s=n.n(c),p=n(0),f=n.n(p),d=n(5),h=n(1718),y=n.n(h),m=n(46),g=n(149),v=n(179),b=n(26),O=n(6),w=n(80),x=n(2),j=n(389),E=n(1726),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),T=(l=i=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleUpdateOwnership=function(){var e=n.props,t=e.organization,r=e.project,o=n.state.text;n.setState({error:null});var a=new m.Client,i=a.requestPromise("/projects/"+t.slug+"/"+r.slug+"/ownership/",{method:"PUT",data:{raw:o||""}});return i.then(function(){Object(w.d)(Object(x.t)("Updated ownership rules")),n.setState({initialText:o})}).catch(function(e){n.setState({error:e.responseJSON}),403===e.status?Object(w.a)(Object(x.t)("You don't have permission to modify ownership rules for this project")):400===e.status&&e.responseJSON.raw&&e.responseJSON.raw[0].startsWith("Invalid rule owners:")?Object(w.a)(Object(x.t)("Unable to save ownership rules changes: "+e.responseJSON.raw[0])):Object(w.a)(Object(x.t)("Unable to save ownership rules changes"))}),i},n.handleChange=function(e){n.setState({text:e.target.value})},n.handleAddRule=function(e){n.setState(function(t){return{text:t.text+"\n"+e}},n.handleUpdateOwnership)},n.state={text:e.initialText,initialText:e.initialText,error:null},n}return a(t,e),C(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.initialText;t!=this.state.initialText&&this.setState({initialText:t})}},{key:"parseError",value:function(e){var t=e&&e.raw&&e.raw[0];return t?t.startsWith("Invalid rule owners:")?f.a.createElement(z,null,t):f.a.createElement(_,{line:t.match(/line (\d*),/)[1]-1}):null}},{key:"mentionableUsers",value:function(){return g.a.getAll().map(function(e){return{id:e.id,display:e.email,email:e.email}})}},{key:"mentionableTeams",value:function(){var e=this.props.project;return(v.a.getBySlug(e.slug)||{teams:[]}).teams.map(function(e){return{id:e.id,display:"#"+e.slug,email:e.id}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.organization,o=t.urls,a=t.paths,i=this.state,l=i.text,c=i.error,s=i.initialText;return f.a.createElement(f.a.Fragment,null,f.a.createElement(E.a,{urls:o,paths:a,organization:r,project:n,onAddRule:this.handleAddRule.bind(this)}),f.a.createElement("div",{style:{position:"relative"},onKeyDown:function(t){t.metaKey&&"Enter"==t.key&&e.handleUpdateOwnership()}},f.a.createElement(S,{placeholder:"#example usage\npath:src/example/pipeline/* person@sentry.io #infra\nurl:http://example.com/settings/* #product",onChange:this.handleChange,value:l,spellCheck:"false",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off"}),f.a.createElement(u.Flex,{align:"center",justify:"space-between"},f.a.createElement("div",null,this.parseError(c)),f.a.createElement(k,null,f.a.createElement(b.default,{size:"small",priority:"primary",onClick:this.handleUpdateOwnership,disabled:l===s},Object(x.t)("Save Changes"))))))}}]),t}(f.a.Component),i.propTypes={organization:O.e.Organization,project:O.e.Project,initialText:s.a.string,urls:s.a.arrayOf(s.a.string),paths:s.a.arrayOf(s.a.string)},l),_=Object(d.default)("div",{target:"en3n9di0"})(j.a,";width:100%;height:",24,"px;background-color:red;opacity:0.1;pointer-events:none;position:absolute;top:",function(e){return 4+24*e.line},"px;"),k=Object(d.default)("div",{target:"en3n9di1"})("text-align:end;padding-top:10px;"),S=Object(d.default)(y.a,{target:"en3n9di2"})(j.a,";min-height:140px;overflow:auto;outline:0;width:100%;resize:none;margin:0;font-family:",function(e){return e.theme.text.familyMono},";word-break:break-all;white-space:pre-wrap;padding-top:",4,"px;line-height:",24,"px;"),z=Object(d.default)("div",{target:"en3n9di3"})("color:",function(e){return e.theme.error},";font-weight:bold;margin-top:12px;");t.a=T},1718:function(e,t,n){"use strict";t.__esModule=!0;var r=n(1719);t.default=r.default},1719:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]]);return n};t.__esModule=!0;var i=n(0),l=n(1720),u=n(1723),c=n(1724),s=c,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={lineHeight:null},t.dispatchEvent=function(e){var n=document.createEvent("Event");n.initEvent(e,!0,!1),t.textarea.dispatchEvent(n)},t.updateLineHeight=function(){t.setState({lineHeight:s(t.textarea)})},t.onChange=function(e){var n=t.props.onChange;t.currentValue=e.currentTarget.value,n&&n(e)},t.saveDOMNodeRef=function(e){var n=t.props.innerRef;n&&n(e),t.textarea=e},t.getLocals=function(){var e=t,n=e.props,r=(n.onResize,n.maxRows),i=(n.onChange,n.style),l=(n.innerRef,a(n,["onResize","maxRows","onChange","style","innerRef"])),u=e.state.lineHeight,c=e.saveDOMNodeRef,s=r&&u?u*r:null;return o({},l,{saveDOMNodeRef:c,style:s?o({},i,{maxHeight:s}):i,onChange:t.onChange})},t}return r(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.onResize;"number"==typeof t.maxRows&&this.updateLineHeight(),setTimeout(function(){return u(e.textarea)}),n&&this.textarea.addEventListener("autosize:resized",n)},t.prototype.componentWillUnmount=function(){var e=this.props.onResize;e&&this.textarea.removeEventListener("autosize:resized",e),this.dispatchEvent("autosize:destroy")},t.prototype.render=function(){var e=this.getLocals(),t=e.children,n=e.saveDOMNodeRef,r=a(e,["children","saveDOMNodeRef"]);return i.createElement("textarea",o({},r,{ref:n}),t)},t.prototype.componentDidUpdate=function(){this.props.value!==this.currentValue&&this.dispatchEvent("autosize:update")},t.defaultProps={rows:1},t.propTypes={rows:l.number,maxRows:l.number,onResize:l.func,innerRef:l.func},t}(i.Component);t.default=p},1720:function(e,t,n){e.exports=n(1721)()},1721:function(e,t,n){"use strict";var r=n(73),o=n(62),a=n(1722);e.exports=function(){function e(e,t,n,r,i,l){l!==a&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return n.checkPropTypes=r,n.PropTypes=n,n}},1722:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},1723:function(e,t,n){var r,o,a;/*!
	Autosize 4.0.0
	license: MIT
	http://www.jacklmoore.com/autosize
*/
!function(n,i){o=[t,e],r=i,void 0!==(a="function"==typeof r?r.apply(t,o):r)&&(e.exports=a)}(0,function(e,t){"use strict";function n(e){function t(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function n(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}function r(){var t=e.style.height,r=n(e),o=document.documentElement&&document.documentElement.scrollTop;e.style.height="";var a=e.scrollHeight+l;if(0===e.scrollHeight)return void(e.style.height=t);e.style.height=a+"px",u=e.clientWidth,r.forEach(function(e){e.node.scrollTop=e.scrollTop}),o&&(document.documentElement.scrollTop=o)}function o(){r();var n=Math.round(parseFloat(e.style.height)),o=window.getComputedStyle(e,null),a="content-box"===o.boxSizing?Math.round(parseFloat(o.height)):e.offsetHeight;if(a!==n?"hidden"===o.overflowY&&(t("scroll"),r(),a="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==o.overflowY&&(t("hidden"),r(),a="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),c!==a){c=a;var l=i("autosize:resized");try{e.dispatchEvent(l)}catch(e){}}}if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!a.has(e)){var l=null,u=e.clientWidth,c=null,s=function(){e.clientWidth!==u&&o()},p=function(t){window.removeEventListener("resize",s,!1),e.removeEventListener("input",o,!1),e.removeEventListener("keyup",o,!1),e.removeEventListener("autosize:destroy",p,!1),e.removeEventListener("autosize:update",o,!1),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),a.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",p,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",o,!1),window.addEventListener("resize",s,!1),e.addEventListener("input",o,!1),e.addEventListener("autosize:update",o,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",a.set(e,{destroy:p,update:o}),function(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),l="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(l)&&(l=0),o()}()}}function r(e){var t=a.get(e);t&&t.destroy()}function o(e){var t=a.get(e);t&&t.update()}var a="function"==typeof Map?new Map:function(){var e=[],t=[];return{has:function(t){return e.indexOf(t)>-1},get:function(n){return t[e.indexOf(n)]},set:function(n,r){-1===e.indexOf(n)&&(e.push(n),t.push(r))},delete:function(n){var r=e.indexOf(n);r>-1&&(e.splice(r,1),t.splice(r,1))}}}(),i=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}var l=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(l=function(e){return e},l.destroy=function(e){return e},l.update=function(e){return e}):(l=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return n(e)}),e},l.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],r),e},l.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e}),t.exports=l})},1724:function(e,t,n){function r(e){var t=o(e,"line-height"),n=parseFloat(t,10);if(t===n+""){var r=e.style.lineHeight;e.style.lineHeight=t+"em",t=o(e,"line-height"),n=parseFloat(t,10),r?e.style.lineHeight=r:delete e.style.lineHeight}if(-1!==t.indexOf("pt")?(n*=4,n/=3):-1!==t.indexOf("mm")?(n*=96,n/=25.4):-1!==t.indexOf("cm")?(n*=96,n/=2.54):-1!==t.indexOf("in")?n*=96:-1!==t.indexOf("pc")&&(n*=16),n=Math.round(n),"normal"===t){var a=e.nodeName,i=document.createElement(a);i.innerHTML="&nbsp;","TEXTAREA"===a.toUpperCase()&&i.setAttribute("rows","1");var l=o(e,"font-size");i.style.fontSize=l,i.style.padding="0px",i.style.border="0px";var u=document.body;u.appendChild(i);n=i.offsetHeight,u.removeChild(i)}return n}var o=n(1725);e.exports=r},1725:function(e,t){var n=function(e,t,n){return n=window.getComputedStyle,(n?n(e):e.currentStyle)[t.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()})]};e.exports=n},1726:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,l,u=n(1),c=n.n(u),s=n(0),p=n.n(s),f=n(5),d=n(14),h=n(2),y=n(149),m=n(26),g=n(397),v=n(124),b=n(24),O=n(268),w=n(6),x=n(80),j=n(1727),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),C={text:"",type:"path",owners:[],isValid:!1},T=(l=i=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.checkIsValid=function(){n.setState(function(e){return{isValid:!!e.text&&e.owners&&!!e.owners.length}})},n.handleTypeChange=function(e){n.setState({type:e}),n.checkIsValid()},n.handleChangeValue=function(e){n.setState({text:e.target.value}),n.checkIsValid()},n.handleChangeOwners=function(e){n.setState({owners:e}),n.checkIsValid()},n.handleAddRule=function(){var e=n.state,t=e.type,r=e.text,o=e.owners;if(!e.isValid)return void Object(x.a)("A Rule needs a type, a value, and one or more owners.");var a=o.map(function(e){return"team"===e.actor.type?"#"+e.actor.name:y.a.getById(e.actor.id).email}).join(" "),i=t+":"+r+" "+a;n.props.onAddRule(i),n.setState(C)},n.handleSelectCandidate=function(e,t){n.setState({text:e,type:t}),n.checkIsValid()},n.state=C,n}return a(t,e),E(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.urls,r=t.paths,o=t.project,a=t.organization,i=this.state,l=i.type,u=i.text,c=i.owners,s=i.isValid;return p.a.createElement(p.a.Fragment,null,(r||n)&&p.a.createElement(_,null,r&&r.map(function(t){return p.a.createElement(z,{key:t,onClick:function(){return e.handleSelectCandidate(t,"path")}},p.a.createElement(P,{src:"icon-circle-add"}),p.a.createElement(S,null,t),p.a.createElement(k,null,"[PATH]"))}),n&&n.map(function(t){return p.a.createElement(z,{key:t,onClick:function(){return e.handleSelectCandidate(t,"url")}},p.a.createElement(P,{src:"icon-circle-add"}),p.a.createElement(S,null,t),p.a.createElement(k,null,"[URL]"))})),p.a.createElement(R,null,p.a.createElement(M,{name:"select-type",value:l,showSearch:!1,onChange:this.handleTypeChange,options:[{value:"path",label:Object(h.t)("Path")},{value:"url",label:Object(h.t)("URL")}],style:{width:140},clearable:!1}),p.a.createElement(A,{controlled:!0,value:u,onChange:this.handleChangeValue,placeholder:"path"===l?"src/example/*":"https://example.com/settings/*"}),p.a.createElement(U,{src:"icon-chevron-right"}),p.a.createElement(d.Flex,{flex:"1",align:"center",mr:1},p.a.createElement(j.a,{organization:a,project:o,value:c,onChange:this.handleChangeOwners})),p.a.createElement(L,{priority:"primary",disabled:!s,onClick:this.handleAddRule,icon:"icon-circle-add",size:"zero"})))}}]),t}(p.a.Component),i.propTypes={project:w.e.Project,organization:w.e.Organization,onAddRule:c.a.func,urls:c.a.arrayOf(c.a.string),paths:c.a.arrayOf(c.a.string)},l),_=Object(f.default)("div",{target:"e1hyuoc70"})("margin-bottom:10px;"),k=Object(f.default)("div",{target:"e1hyuoc71"})("color:",function(e){return e.theme.borderDark},";"),S=Object(f.default)(v.a,{target:"e1hyuoc72"})("flex:1;"),z=Object(f.default)("div",{target:"e1hyuoc73"})("font-family:",function(e){return e.theme.text.familyMono},";border:1px solid ",function(e){return e.theme.borderDark},";background-color:#f8fafd;padding-left:5px;margin-bottom:3px;cursor:pointer;overflow:hidden;display:flex;align-items:center;"),P=Object(f.default)(b.a,{target:"e1hyuoc74"})("color:",function(e){return e.theme.borderDark},";margin-right:5px;flex-shrink:0;"),R=Object(f.default)("div",{target:"e1hyuoc75"})("display:flex;height:40px;align-items:center;margin-bottom:1em;"),M=Object(f.default)(g.a,{target:"e1hyuoc76"})("margin-right:10px;width:80px;flex-shrink:0;"),A=Object(f.default)(O.a,{target:"e1hyuoc77"})("padding:0.5em;line-height:19px;margin-right:5px;"),U=Object(f.default)(b.a,{target:"e1hyuoc78"})("color:",function(e){return e.theme.borderDark},";flex-shrink:0;margin-right:5px;"),L=Object(f.default)(m.default,{target:"e1hyuoc79"})("width:37px;height:37px;flex-shrink:0;padding:10px 12px !important;");t.a=T},1727:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a),l=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return W});var u,c,s,p,f=n(27),d=n(101),h=n.n(d),y=n(14),m=n(1),g=n.n(m),v=n(0),b=n.n(v),O=n(31),w=n.n(O),x=n(7),j=n.n(x),E=n(5),C=n(180),T=n(2),_=n(10),k=n(46),S=n(149),z=n(179),P=n(150),R=n(267),M=n(617),A=n(400),U=n(6),L=n(26),N=n(24),H=n(21),D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),F=(c=u=function(e){function t(){var e,n,r,o;a(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.handleClick=function(){r.props.onRemove(r.props.value)},o=n,i(r,o)}return l(t,e),I(t,[{key:"render",value:function(){return b.a.createElement("a",{onClick:this.handleClick},b.a.createElement(A.a,{actor:this.props.value.actor,size:28}))}}]),t}(b.a.Component),u.propTypes={value:g.a.object,onRemove:g.a.func},c),V=function(e){return(e.email&&e.email.toLowerCase())+" "+(e.name&&e.name.toLowerCase())},W=(p=s=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),l=0;l<n;l++)r[l]=arguments[l];var u=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return u.state={loading:!1,inputValue:""},u.renderUserBadge=function(e){return b.a.createElement(R.a,{avatarSize:24,user:e,hideEmail:!0,useLink:!1})},u.createMentionableUser=function(e){return{value:Object(_.b)(e.id),label:u.renderUserBadge(e),searchKey:V(e),actor:{type:"user",id:e.id,name:e.name}}},u.createUnmentionableUser=function(e){var t=e.user;return D({},u.createMentionableUser(t),{disabled:!0,label:b.a.createElement(B,null,b.a.createElement(H.default,{tooltipOptions:{container:"body",placement:"left"},title:Object(T.t)("%s is not a member of project",t.name||t.email)},u.renderUserBadge(t)))})},u.createMentionableTeam=function(e){return{value:Object(_.a)(e.id),label:b.a.createElement(R.a,{team:e}),searchKey:"#"+e.slug,actor:{type:"team",id:e.id,name:e.slug}}},u.createUnmentionableTeam=function(e){var t=u.props.organization,n=t.access.includes("project:write");return D({},u.createMentionableTeam(e),{disabled:!0,label:b.a.createElement(y.Flex,{justify:"space-between"},b.a.createElement(B,null,b.a.createElement(H.default,{tooltipOptions:{container:"body",placement:"left"},title:Object(T.t)("%s is not a member of project","#"+e.slug)},b.a.createElement(R.a,{team:e}))),b.a.createElement(H.default,{title:n?Object(T.t)("Add %s to project","#"+e.slug):Object(T.t)("You do not have permission to add team to project.")},b.a.createElement(q,{size:"zero",borderless:!0,disabled:!n,onClick:u.handleAddTeamToProject.bind(u,e)},b.a.createElement(N.a,{src:"icon-circle-add"}))))})},u.handleChange=function(e){u.props.onChange(e)},u.handleInputChange=function(e){u.setState({inputValue:e}),u.props.onInputChange&&u.props.onInputChange(e)},u.queryMembers=h()(function(e,t){var n=u.props.organization;return u.api?u.api.requestPromise("/organizations/"+n.slug+"/members/",{query:{query:e}}).then(function(e){return t(null,e)},function(e){return t(e)}):null},250),u.handleLoadOptions=function(){var e=u.getMentionableUsers(),t=u.getMentionableTeams(),n=u.getTeamsNotInProject(t),r=e.map(function(e){return e.actor.id});return new Promise(function(e,t){u.queryMembers(u.state.inputValue,function(n,r){n?t(n):e(r)})}).then(function(e){return e?e.filter(function(e){var t=e.user;return t&&-1===r.indexOf(t.id)}).map(u.createUnmentionableUser):[]}).then(function(r){return{options:[].concat(o(e),o(t),o(n),o(r))}})},u.api=new k.Client,u.projectsStoreMixin=j.a.listenTo(z.a,function(){u.closeSelectMenu()}),u}return l(t,e),I(t,[{key:"componentDidMount",value:function(){this.projectsStoreMixin&&this.projectsStoreMixin.componentDidMount()}},{key:"componentWillUnmount",value:function(){this.api=null,this.projectsStoreMixin&&this.projectsStoreMixin.componentWillUnmount()}},{key:"getMentionableUsers",value:function(){return S.a.getAll().map(this.createMentionableUser)}},{key:"getMentionableTeams",value:function(){var e=this.props.project,t=z.a.getBySlug(e.slug);return t?t.teams.map(this.createMentionableTeam):[]}},{key:"getTeamsNotInProject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=P.a.getAll()||[],n=e.map(function(e){return e.actor.id});return t.filter(function(e){return-1===n.indexOf(e.id)}).map(this.createUnmentionableTeam)}},{key:"closeSelectMenu",value:function(){if(this.selectRef){var e=w.a.findDOMNode(this.selectRef).querySelector(".Select-input input");e&&e.blur()}}},{key:"handleAddTeamToProject",value:function(){function e(e){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t){var n,r,a,i,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,r=n.organization,a=n.project,i=n.value,l=[].concat(o(i)),this.props.onChange([].concat(o(this.props.value),[this.createMentionableTeam(t)])),e.prev=3,e.next=6,Object(C.a)(this.api,r.slug,a.slug,t);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),this.props.onChange(l),this.closeSelectMenu();case 12:case"end":return e.stop()}},e,this,[[3,8]])}));return e}()},{key:"render",value:function(){var e=this;return b.a.createElement(M.a,{filterOptions:function(e,t){return e.filter(function(e){return e.searchKey.indexOf(t)>-1})},ref:function(t){return e.selectRef=t},loadOptions:this.handleLoadOptions,defaultOptions:!0,async:!0,cache:!1,valueComponent:F,placeholder:Object(T.t)("Add Owners"),onInputChange:this.handleInputChange,onChange:this.handleChange,value:this.props.value,className:Object(f.css)({width:200})})}}]),t}(b.a.Component),s.propTypes={project:U.e.Project,organization:U.e.Organization,value:g.a.array,onChange:g.a.func,onInputChange:g.a.func},p),B=Object(E.default)("div",{target:"ez8xng90"})('opacity:0.5;overflow:hidden;/* Needed so that "Add to team" button can fit */'),q=Object(E.default)(L.default,{target:"ez8xng91"})("flex-shrink:0;")},1738:function(e,t,n){function r(e){return e&&e.length?o(e):[]}var o=n(416);e.exports=r},1772:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,l,u=n(1738),c=n.n(u),s=n(0),p=n.n(s),f=n(1),d=n.n(f),h=n(184),y=(n.n(h),n(2)),m=n(182),g=n(6),v=n(1717),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w=(l=i=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),O(t,[{key:"getEndpoints",value:function(){var e=this.props,t=e.organization,n=e.project,r=e.issueId;return[["ownership","/projects/"+t.slug+"/"+n.slug+"/ownership/"],["urlTagData","/issues/"+r+"/tags/url/",{},{allowError:function(e){return 404===e.status}}],["eventData","/issues/"+r+"/events/latest/"]]}},{key:"renderBody",value:function(){var e,t,n=this.state,r=n.ownership,o=n.urlTagData,a=n.eventData,i=o?o.topValues.sort(function(e,t){return e.count-t.count}).map(function(e){return e.value}).slice(0,5):[],l=(null!=(e=a.entries.find(function(e){return"exception"==e.type}))&&null!=(e=e.data)&&null!=(e=e.values)&&null!=(e=e[0])&&null!=(e=e.stacktrace)?e.frames:e)||(null!=(t=a.entries.find(function(e){return"stacktrace"==e.type}))&&null!=(t=t.data)?t.frames:t)||[],u=l.filter(function(e){return e.inApp});u.length>0&&(l=u);var s=c()(l.map(function(e){return e.filename||e.absPath}).filter(function(e){return e})).slice(0,30);return p.a.createElement(p.a.Fragment,null,p.a.createElement("p",null,Object(y.t)("Match against Issue Data: (globbing syntax *, ? supported)")),p.a.createElement(v.a,b({},this.props,{initialText:r.raw||"",urls:i,paths:s,onSave:this.props.onSave})))}}]),t}(m.default),i.propTypes={organization:g.e.Organization,project:g.e.Project,issueId:d.a.string,onSave:d.a.func},l);t.a=w}});
//# sourceMappingURL=CreateOwnershipRuleModal.js.map