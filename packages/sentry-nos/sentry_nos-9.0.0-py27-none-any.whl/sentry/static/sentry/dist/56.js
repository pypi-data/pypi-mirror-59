webpackJsonpexports([56],{1564:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"SudoModal",function(){return T});var i,u,c=n(27),s=n(9),l=n(1),p=n.n(l),f=n(0),h=n.n(f),d=n(3),b=n.n(d),y=n(2),m=n(212),O=n(8),v=n(26),j=n(25),w=n(600),g=n(128),E=n(81),P=n(1764),S=n(38),_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),T=(u=i=function(e){function t(){var e;r(this,t);for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];var u=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o)));return u.handleSuccess=function(){var e=u.props,t=e.closeModal,n=e.superuser,r=e.router,a=e.retryRequest;if(a)return n?void r.replace(_({},r.getCurrentLocation(),{state:{forceUpdate:new Date}})):void u.setState({busy:!0},function(){a().then(function(){u.setState({busy:!1},t)})})},u.handleError=function(){u.setState({busy:!1,error:!0})},u.handleU2fTap=function(e){return u.setState({busy:!0}),u.props.api.requestPromise("/auth/",{method:"PUT",data:e}).then(function(){u.handleSuccess()}).catch(function(e){throw u.setState({busy:!1}),e})},u.state={error:!1,busy:!1},u}return o(t,e),C(t,[{key:"render",value:function(){var e=this.props,t=e.closeModal,n=e.superuser,r=e.user,a=e.Header,o=e.Body;return h.a.createElement(h.a.Fragment,null,h.a.createElement(a,{closeButton:!0,onHide:t},Object(y.t)("Confirm Password to Continue")),h.a.createElement(o,null,r.hasPasswordAuth?h.a.createElement(h.a.Fragment,null,h.a.createElement(E.default,{className:Object(c.css)({marginBottom:Object(S.a)(1)})},n?Object(y.t)("You are attempting to access a resource that requires superuser access, please re-authenticate as a superuser."):Object(y.t)("Help us keep your account safe by confirming your identity.")),this.state.error&&h.a.createElement(m.a,{className:Object(c.css)({marginBottom:0}),type:"error",icon:"icon-circle-exclamation"},Object(y.t)("Incorrect password")),h.a.createElement(w.a,{apiMethod:"PUT",apiEndpoint:"/auth/",submitLabel:Object(y.t)("Confirm Password"),onSubmit:this.handleSubmit,onSubmitSuccess:this.handleSuccess,onSubmitError:this.handleError,hideErrors:!0,resetOnError:!0,hideFooter:!r.hasPasswordAuth},h.a.createElement(g.a,{type:"password",inline:!1,label:Object(y.t)("Password"),flexibleControlStateSize:!0,name:"password",className:Object(c.css)({paddingLeft:0,paddingRight:0,borderBottom:"none"})}),h.a.createElement(P.a,{displayMode:"sudo",onTap:this.handleU2fTap}))):h.a.createElement("div",null,h.a.createElement(E.default,null,Object(y.t)("You will need to reauthenticate to continue.")),h.a.createElement(v.default,{priority:"primary",href:"/auth/login/?next="+encodeURIComponent(location.pathname)},Object(y.t)("Continue")))))}}]),t}(h.a.Component),i.propTypes={api:p.a.object,closeModal:p.a.func.isRequired,retryRequest:p.a.func.isRequired,superuser:p.a.bool,router:p.a.object,user:p.a.object,Header:p.a.oneOfType([p.a.func,p.a.node]).isRequired,Body:p.a.oneOfType([p.a.func,p.a.node]).isRequired},u),R=b()({displayName:"SudoModalContainer",mixins:[O.default],render:function(){var e=j.default.get("user");return h.a.createElement(T,_({},this.props,{user:e,api:this.api}))}});t.default=Object(s.withRouter)(R)},1764:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(0),c=n.n(u),s=n(46),l=n(615),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={authenticators:null},n.api=new s.Client,n}return i(t,e),f(t,[{key:"componentDidMount",value:function(){var e=this;this.api.requestPromise("/authenticators/").then(function(t){e.setState({authenticators:t||[]})}).catch(function(){})}},{key:"componentWillUnmount",value:function(){this.api.clear(),this.api=null}},{key:"render",value:function(){var e=this,t=this.state,n=t.className,a=t.authenticators;return a&&a.length?c.a.createElement("div",{className:n},a.map(function(t){var n=t.id,a=r(t,["id"]);return"u2f"===n&&a.challenge?c.a.createElement(l.default,p({key:n},e.props,{challengeData:a.challenge})):null})):null}}]),t}(c.a.Component);t.a=h}});
//# sourceMappingURL=SudoModal.js.map