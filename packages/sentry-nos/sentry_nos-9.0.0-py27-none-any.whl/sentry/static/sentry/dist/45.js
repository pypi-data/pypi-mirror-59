webpackJsonpexports([45],{1610:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,i,s=a(9),c=a(0),m=a.n(c),u=a(1797),d=a(2),f=a(92),b=a(26),v=a(25),p=a(103),g=a(30),h=a(404),E=a(18),y=a(6),O=a(52),S=a(148),I=a(647),j=a(648),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},N=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),T=(i=l=function(e){function t(){var e;r(this,t);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];var i=n(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o)));i.handleSave=function(){var e=i.getOrganization(),t=e.slug,a=i.props.params,r=g.default.add("Saving...");i.setState({busy:!0}),Object(u.b)(i.api,{orgId:t,memberId:a.memberId,data:i.state.member}).then(function(){g.default.addSuccess("Saved"),i.redirectToMemberPage()}).catch(function(){return g.default.addError("Could not save...")}).then(function(){g.default.remove(r),i.setState({busy:!1})})},i.handleInvite=function(e){var t=i.getOrganization(),a=t.slug,r=i.props.params,n=g.default.add("Sending invite...");i.setState({busy:!0}),Object(u.a)(i.api,{orgId:a,memberId:r.memberId,regenerate:e}).then(function(t){g.default.add("Sent invite!","success",{duration:5e3}),e&&i.setState(function(e){return{member:w({},e.member,t)}})}).catch(function(){return g.default.add("Could not send invite","error",{duration:5e3})}).then(function(){g.default.remove(n),i.setState({busy:!1})})},i.handleToggleTeam=function(e){var t=i.state.member,a=new Set(t.teams);a.has(e)?a.delete(e):a.add(e),i.setState({member:w({},t,{teams:Array.from(a.values())})})};var s=i.getOrganization(),c=s.teams;return i.state=w({},i.state,{selectedTeams:new Set(c.map(function(e){return e.slug})),roleList:[],selectedRole:"",member:null}),i}return o(t,e),N(t,[{key:"getEndpoints",value:function(){return[["member","/organizations/"+this.getOrganization().slug+"/members/"+this.props.params.memberId+"/"]]}},{key:"getOrganization",value:function(){return this.context.organization}},{key:"redirectToMemberPage",value:function(){var e=Object(S.a)("members/",{routes:this.props.routes,params:this.props.params,stepBack:-2});s.browserHistory.push(e)}},{key:"renderBody",value:function(){var e=this,t=this.state,a=t.error,r=t.member,n=this.getOrganization(),o=n.teams;if(!r)return m.a.createElement(h.a,null);var l=r.email,i=r.invite_link,s=v.default.get("user"),c=s.email===l,u=c;return m.a.createElement("div",null,m.a.createElement(O.default,{title:m.a.createElement("div",null,m.a.createElement("div",{style:{fontSize:"1.4em"}},r.name),m.a.createElement("div",null,m.a.createElement("small",{style:{opacity:.6,fontSize:"0.8em",fontWeight:"normal"}},Object(d.t)("Member Settings"))))}),a&&a.role&&m.a.createElement("p",{className:"error alert-error"},a.role),m.a.createElement(E.a,null,m.a.createElement(E.e,null,Object(d.t)("Basics")),m.a.createElement(E.c,null,m.a.createElement(E.f,{direction:"column"},m.a.createElement("div",{className:"row",style:{width:"100%"}},m.a.createElement("div",{className:"col-md-6"},m.a.createElement("div",{className:"control-group"},m.a.createElement("label",null,Object(d.t)("Email")),m.a.createElement("div",{className:"controls"},m.a.createElement("a",{href:"mailto:"+l},l)))),m.a.createElement("div",{className:"col-md-3"},m.a.createElement("div",{className:"control-group"},m.a.createElement("label",null,Object(d.t)("Status")),m.a.createElement("div",{className:"controls"},r.pending?m.a.createElement("em",null,"Invitation Pending"):"Active"))),m.a.createElement("div",{className:"col-md-3"},m.a.createElement("div",{className:"control-group"},m.a.createElement("label",null,Object(d.t)("Added")),m.a.createElement("div",{className:"controls"},m.a.createElement(p.default,{dateOnly:!0,date:r.dateCreated}))))),i&&m.a.createElement("div",{className:"form-actions"},m.a.createElement("div",{className:"control-group"},m.a.createElement("label",null,Object(d.t)("Invite Link")),m.a.createElement("div",{className:"controls"},m.a.createElement("code",{className:"auto-select form-control",style:{overflow:"auto"}},i)),m.a.createElement("p",{className:"help-block"},"This unique invite link may only be used by this member.")),m.a.createElement("div",{className:"align-right"},m.a.createElement(b.default,{style:{marginRight:10},onClick:function(){return e.handleInvite(!0)}},Object(d.t)("Generate New Invite")),m.a.createElement(b.default,{onClick:function(){return e.handleInvite(!1)}},Object(d.t)("Resend Invite"))))))),m.a.createElement(I.a,{enforceAllowed:!1,disabled:u,roleList:r.roles,selectedRole:r.role,setRole:function(t){return e.setState({member:w({},r,{role:t})})}}),m.a.createElement(j.a,{teams:o,selectedTeams:new Set(r.teams),toggleTeam:this.handleToggleTeam}),m.a.createElement(b.default,{priority:"primary",busy:this.state.busy,className:"invite-member-submit",onClick:this.handleSave},Object(d.t)("Save Member")))}}]),t}(f.default),l.contextTypes={organization:y.e.Organization},i);t.default=T},1797:function(e,t,a){"use strict";function r(e,t){o.a.update(t.memberId,t.data);var a="/organizations/"+t.orgId+"/members/"+t.memberId+"/";return new Promise(function(r,n){return e.request(a,{method:"PUT",data:t.data,success:function(e){o.a.updateSuccess(e),r(e)},error:function(e){o.a.updateError(e),n(e)}})})}function n(e,t){o.a.resendMemberInvite(t.orgId,t.data);var a="/organizations/"+t.orgId+"/members/"+t.memberId+"/";return new Promise(function(r,n){return e.request(a,{method:"PUT",data:{regenerate:t.regenerate,reinvite:!0},success:function(e){o.a.resendMemberInviteSuccess(e),r(e)},error:function(e){o.a.resendMemberInviteError(e),n(e)}})})}t.b=r,t.a=n;var o=a(1798)},1798:function(e,t,a){"use strict";var r=a(7),n=a.n(r),o=n.a.createActions(["createSuccess","update","updateError","updateSuccess","resendMemberInvite","resendMemberInviteSuccess","resendMemberInviteError"]);t.a=o}});
//# sourceMappingURL=45.js.map