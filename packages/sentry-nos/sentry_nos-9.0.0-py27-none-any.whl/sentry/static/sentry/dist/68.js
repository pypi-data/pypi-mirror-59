webpackJsonpexports([68],{1585:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),i=n.n(l),u=n(0),c=n.n(u),s=n(5),f=n(80),d=n(104),m=n(2),g=n(92),h=n(26),b=n(119),p=n(52),y=n(81),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),w=function(){return window.location.href="/"},E=Object(s.default)("div",{target:"e1prmbzz0"})("font-weight:bold;font-size:1.2em;"),O=function(e){var t=e.Header,n=e.Body,o=e.Footer;return c.a.createElement("div",null,c.a.createElement(t,null,Object(m.t)("Closing Account")),c.a.createElement(n,null,c.a.createElement(y.default,null,Object(m.t)("Your account has been deactivated and scheduled for removal.")),c.a.createElement(y.default,null,Object(m.t)("Thanks for using Sentry! We hope to see you again soon!"))),c.a.createElement(o,null,c.a.createElement(h.default,{href:"/"},Object(m.t)("Goodbye"))))};O.propTypes={Header:i.a.node,Body:i.a.node,Footer:i.a.node};var j=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),l=0;l<n;l++)r[l]=arguments[l];var i=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return i.getSingleOwners=function(){return i.state.organizations.filter(function(e){return e.singleOwner}).map(function(e){return e.organization.slug})},i.handleChange=function(e,t,n){var o=e.slug,a=n.target.checked;t||i.setState(function(e){var t=e.orgsToRemove||new Set(i.getSingleOwners());return a?t.add(o):t.delete(o),{orgsToRemove:t}})},i.handleRemoveAccount=function(){var e=i.state.orgsToRemove,t=null===e?i.getSingleOwners():Array.from(e);Object(f.c)("Closing account..."),i.api.requestPromise("/users/me/",{method:"DELETE",data:{organizations:t}}).then(function(){Object(d.f)(O,{onClose:w}),setTimeout(w,1e4)},function(){Object(f.a)("Error closing account")})},i.state.orgsToRemove=null,i}return r(t,e),v(t,[{key:"getEndpoints",value:function(){return[["organizations","/organizations/?owner=1"]]}}]),v(t,[{key:"renderBody",value:function(){var e=this,t=this.state,n=t.organizations,o=t.orgsToRemove;return c.a.createElement("div",null,c.a.createElement(p.default,{title:"Close Account"}),c.a.createElement(y.default,null,Object(m.t)("This will permanently remove all associated data for your user"),"."),c.a.createElement(y.default,null,c.a.createElement(E,null,Object(m.t)("Closing your account is permanent and cannot be undone"),"!")),!!n.length&&c.a.createElement(y.default,null,Object(m.t)("If you continue, the following organizations will be removed"),":"),c.a.createElement("ul",null,n.map(function(t){var n=t.organization,a=t.singleOwner;return c.a.createElement("li",{key:n.slug},c.a.createElement("label",null,c.a.createElement("input",{style:{marginRight:6},type:"checkbox",value:n.slug,onChange:e.handleChange.bind(e,n,a),name:"organizations",checked:null===o?a:o.has(n.slug),disabled:a}),n.name," (",n.slug,")"))})),c.a.createElement(y.default,null,"Ownership will remain with other members if an organization is not deleted.",c.a.createElement("br",null),"Disabled boxes mean that there is no other owner within the organization so no one else can take ownership."),c.a.createElement(b.a,{priority:"danger",message:Object(m.t)("This is permanent and cannot be undone, are you really sure you want to do this?"),onConfirm:this.handleRemoveAccount},c.a.createElement(h.default,{priority:"danger"},Object(m.t)("Close Account"))))}}]),t}(g.default);t.default=j}});
//# sourceMappingURL=AccountClose.js.map