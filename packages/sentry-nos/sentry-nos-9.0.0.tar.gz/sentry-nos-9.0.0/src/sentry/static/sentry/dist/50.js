webpackJsonpexports([50],{1590:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ProjectReleaseTracking",function(){return R});var l,i,c=n(1),u=n.n(c),s=n(0),p=n.n(s),f=n(80),d=n(2),h=n(92),b=n(190),y=n(26),m=n(119),g=n(192),j=n(603),E=n(602),O=n(11),k=n(18),v=n(405),w=n(6),_=n(52),T=n(1645),C=n(226),P=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),R=(i=l=function(e){function t(){var e,n,o,l;a(this,t);for(var i=arguments.length,c=Array(i),u=0;u<i;u++)c[u]=arguments[u];return n=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),o.handleRegenerateToken=function(){var e=o.props.params,t=e.orgId,n=e.projectId;o.api.request("/projects/"+t+"/"+n+"/releases/token/",{method:"POST",data:{project:n},success:function(e){o.setState({token:e.token,webhookUrl:e.webhookUrl}),Object(f.d)(Object(d.t)("Your deploy token has been regenerated. You will need to update any existing deploy hooks."))},error:function(){Object(f.a)(Object(d.t)("Unable to regenerate deploy token, please try again"))}})},l=n,r(o,l)}return o(t,e),P(t,[{key:"getTitle",value:function(){return"Release Tracking"}},{key:"getEndpoints",value:function(){var e=this.props.params;return[["data","/projects/"+e.orgId+"/"+e.projectId+"/releases/token/"]]}},{key:"getReleaseWebhookIntructions",value:function(){return"curl "+this.state.data.webhookUrl+" \\\n  -X POST \\\n  -H 'Content-Type: application/json' \\\n  -d '{\"version\": \"abcdefg\"}'"}},{key:"getReleaseClientConfigurationIntructions",value:function(){return"// See SDK documentation for language specific usage.\nRaven.config('your dsn', {\n  release: '0e4fdef81448dcfa0e16ecc4433ff3997aa53572'\n});"}},{key:"renderBody",value:function(){var e=this.props,t=e.organization,n=e.project,a=e.plugins;if(a.loading)return p.a.createElement(O.default,null);var r=a.plugins.filter(function(e){return"release-tracking"===e.type&&e.hasConfiguration}),o=this.state.data,l=o.token,i=o.webhookUrl;return l=Object(j.a)({value:l,fixed:"__TOKEN__"}),i=Object(j.a)({value:i,fixed:"__WEBHOOK_URL__"}),p.a.createElement("div",null,p.a.createElement(_.default,{title:Object(d.t)("Release Tracking")}),p.a.createElement("p",null,Object(d.t)("Configure release tracking for this project to automatically record new releases of your application.")),p.a.createElement(k.a,null,p.a.createElement(k.e,null,Object(d.t)("Client Configuration")),p.a.createElement(k.c,{disablePadding:!1,flex:!0},p.a.createElement("p",null,Object(d.tct)("Start by binding the [release] attribute in your application",{release:p.a.createElement("code",null,"release")})),p.a.createElement(b.a,null,p.a.createElement("pre",null,this.getReleaseClientConfigurationIntructions())),p.a.createElement("p",null,Object(d.t)("This will annotate each event with the version of your application, as well as automatically create a release entity in the system the first time it's seen.")),p.a.createElement("p",null,Object(d.t)("In addition you may configure a release hook (or use our API) to push a release and include additional metadata with it.")))),p.a.createElement(k.a,null,p.a.createElement(k.e,null,Object(d.t)("Deploy Token")),p.a.createElement(k.c,{flex:!0},p.a.createElement(E.a,{label:Object(d.t)("Token"),help:Object(d.t)("A unique secret which is used to generate deploy hook URLs")},p.a.createElement(T.a,null,l)),p.a.createElement(E.a,{label:Object(d.t)("Regenerate Token"),help:Object(d.t)("If a service becomes compromised, you should regenerate the token and re-configure any deploy hooks with the newly generated URL.")},p.a.createElement("div",null,p.a.createElement(m.a,{priority:"danger",onConfirm:this.handleRegenerateToken,message:Object(d.t)("Are you sure you want to regenerate your token? Your current token will no longer be usable.")},p.a.createElement(y.default,{type:"button",priority:"danger"},Object(d.t)("Regenerate Token"))))))),p.a.createElement(k.a,null,p.a.createElement(k.e,null,Object(d.t)("Webhook")),p.a.createElement(k.c,{disablePadding:!1,flex:!0},p.a.createElement("p",null,Object(d.t)("If you simply want to integrate with an existing system, sometimes its easiest just to use a webhook.")),p.a.createElement(b.a,null,p.a.createElement("pre",null,i)),p.a.createElement("p",null,Object(d.t)('The release webhook accepts the same parameters as the "Create a new Release" API endpoint.')),p.a.createElement(g.default,{value:p.a.createElement(b.a,null,p.a.createElement("pre",null,this.getReleaseWebhookIntructions())),fixed:p.a.createElement("pre",null,"curl __WEBHOOK_URL__ \\\n  -X POST \\\n  -H 'Content-Type: application/json' \\\n  -d '{\"version\": \"abcdefg\"}'")}))),p.a.createElement(v.a,{organization:t,project:n,pluginList:r}),p.a.createElement(k.a,null,p.a.createElement(k.e,null,Object(d.t)("API")),p.a.createElement(k.c,{disablePadding:!1,flex:!0},p.a.createElement("p",null,Object(d.t)("You can notify Sentry when you release new versions of your application via our HTTP API.")),p.a.createElement("p",null,Object(d.tct)("See the [link:Releases API documentation] for more information.",{link:p.a.createElement("a",{href:"https://docs.sentry.io/hosted/api/releases/"})})))))}}]),t}(h.default),l.propTypes={organization:u.a.object,project:u.a.object,plugins:w.e.PluginsStore},i);t.default=Object(C.a)(R)},1645:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l,i,c=n(14),u=n(1),s=n.n(u),p=n(0),f=n.n(p),d=n(31),h=n.n(d),b=n(5),y=n(389),m=n(390),g=n(26),j=n(604),E=n(24),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),k=Object(b.default)(function(e){return f.a.createElement("input",e)},{target:"e1usehz70"})(y.a,";background-color:",function(e){return e.theme.offWhite},";border-right-width:0;border-top-right-radius:0;border-bottom-right-radius:0;&:hover,&:focus{background-color:",function(e){return e.theme.offWhite},";border-right-width:0;}"),v=Object(b.default)("div",{target:"e1usehz71"})("flex-grow:1;border:none;"),w=Object(b.default)(g.default,{target:"e1usehz72"})("flex-shrink:1;border-radius:0 0.25em 0.25em 0;box-shadow:none;"),_=(i=l=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleCopyClick=function(e){if(n.textRef){var t=n.props.onCopy;n.handleSelectText(),t(n.props.children,e),e.stopPropagation()}},n.handleSelectText=function(){n.textRef&&Object(m.a)(h.a.findDOMNode(n.textRef))},n.handleAutoMount=function(e){n.textRef=e},n}return o(t,e),O(t,[{key:"render",value:function(){var e=this.props,t=e.style,n=e.children;return f.a.createElement(c.Flex,null,f.a.createElement(v,null,f.a.createElement(k,{readOnly:!0,ref:this.handleAutoMount,style:t,value:n,onClick:this.handleSelectText})),f.a.createElement(j.a,{hideUnsupported:!0,onClick:this.handleCopyClick,value:n},f.a.createElement(w,{type:"button",size:"xsmall",onClick:this.handleCopyClick},f.a.createElement(E.a,{src:"icon-clipboard",size:"1.25em"}))))}}]),t}(f.a.Component),l.propTypes={children:s.a.string.isRequired,style:s.a.object,onCopy:s.a.func},l.defaultProps={onCopy:function(){}},i);t.a=_}});
//# sourceMappingURL=ProjectReleaseTracking.js.map