webpackJsonpexports([39],{1598:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),a.d(t,"default",function(){return ee});var i,l,c,s,u=a(27),d=a(14),p=a(9),f=a(1),m=a.n(f),b=a(0),h=a.n(b),y=a(3),j=a.n(y),E=a(5),v=a(80),g=a(39),O=a(2),w=a(8),S=a(92),k=a(612),_=a(26),x=a(119),C=a(103),P=a(178),D=a(602),R=a(600),I=a(606),T=a(72),K=a(268),N=a(15),z=a(11),L=a(18),q=a(1730),M=a(638),A=a(6),U=a(52),B=a(213),F=a(81),W=a(608),Y=a(1645),H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},J=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),V=function(){function e(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw o}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),G=new Map([[0,"None"],[60,"1 minute"],[300,"5 minutes"],[900,"15 minutes"],[3600,"1 hour"],[7200,"2 hours"],[14400,"4 hours"],[21600,"6 hours"],[43200,"12 hours"],[86400,"24 hours"]]),Q=function(e){return G.get(e)},X=j()({displayName:"KeyStats",mixins:[w.default],getInitialState:function(){var e=Math.floor((new Date).getTime()/1e3);return{since:e-2592e3,until:e,loading:!0,error:!1,stats:null,emptyStats:!1}},componentWillMount:function(){this.fetchData()},fetchData:function(){var e=this,t=this.props.params,a=t.keyId,n=t.orgId,r=t.projectId;this.api.request("/projects/"+n+"/"+r+"/keys/"+a+"/stats/",{query:{since:this.state.since,until:this.state.until,resolution:"1d"},success:function(t){var a=!0,n=t.map(function(e){return e.total&&(a=!1),{x:e.ts,y:[e.accepted,e.dropped]}});e.setState({stats:n,emptyStats:a,error:!1,loading:!1})},error:function(){e.setState({error:!0,loading:!1})}})},renderTooltip:function(e,t,a){var n=a.getTimeLabel(e),r=V(e.y,3),o=r[0],i=r[1],l=r[2],c=o.toLocaleString()+" accepted";return i&&(c+="<br>"+i.toLocaleString()+" rate limited"),l&&(c+="<br>"+l.toLocaleString()+" filtered"),'<div style="width:150px"><div class="time-label">'+n+'</div><div class="value-label">'+c+"</div></div>"},render:function(){return this.state.loading?h.a.createElement("div",{className:"box"},h.a.createElement(z.default,null)):this.state.error?h.a.createElement(N.default,{onRetry:this.fetchData}):h.a.createElement(L.a,null,h.a.createElement(L.e,null,Object(O.t)("Key usage in the last 30 days (by day)")),h.a.createElement(L.c,null,this.state.emptyStats?h.a.createElement(P.a,{className:Object(u.css)({flexDirection:"column",alignItems:"center"})},h.a.createElement(te,null,Object(O.t)("Nothing recorded in the last 30 days.")),h.a.createElement(F.default,{className:Object(u.css)({marginBottom:0})},Object(O.t)("Total events captured using these credentials."))):h.a.createElement(B.default,{points:this.state.stats,height:150,label:"events",barClasses:["accepted","rate-limited"],className:"standard-barchart",style:{border:"none"},tooltip:this.renderTooltip})))}}),Z=(l=i=function(e){function t(){var e,a,o,i;n(this,t);for(var l=arguments.length,c=Array(l),s=0;s<l;s++)c[s]=arguments[s];return a=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),o.handleChangeWindow=function(e,t,a,n,r){var o=H({},a,{window:n});e(o,r),t(o,r)},o.handleChangeCount=function(e,t,a){e(H({},t,{count:a.target.value}),a)},i=a,r(o,i)}return o(t,e),J(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.enabled,n=t.data,r=t.project,o=t.organization,i=t.hooksDisabled,l=this.props.params,c=l.keyId,s=l.orgId,p=l.projectId,f="/projects/"+s+"/"+p+"/keys/"+c+"/";return a||!!i.length?h.a.createElement(R.a,{saveOnBlur:!0,apiEndpoint:f,apiMethod:"PUT",initialData:n},h.a.createElement(L.a,null,h.a.createElement(L.e,null,Object(O.t)("Rate Limits")),a?h.a.createElement(L.c,null,h.a.createElement(L.b,{type:"info",icon:"icon-circle-exclamation",m:0,mb:0},Object(O.t)("Rate limits provide a flexible way to manage your event volume. If you have a noisy project or environment you can configure a rate limit for this key to reduce the number of events processed.")),h.a.createElement(I.a,{className:"rate-limit-group",name:"rateLimit",label:Object(O.t)("Rate Limit"),validate:function(e){var t=(e.id,e.form);return e.model,t&&t.rateLimit&&void 0!==t.rateLimit.count&&void 0!==t.rateLimit.window?[]:[["rateLimit",Object(O.t)("Fill in both fields first")]]},help:Object(O.t)("Apply a rate limit to this credential to cap the amount of events accepted during a time window."),inline:!1},function(t){var a=t.onChange,n=t.onBlur,r=t.value;return h.a.createElement(d.Flex,null,h.a.createElement(d.Flex,{flex:"2",align:"center"},h.a.createElement(K.a,{type:"number",name:"rateLimit.count",min:0,value:r&&r.count,placeholder:Object(O.t)("Count"),onChange:e.handleChangeCount.bind(e,a,r),onBlur:e.handleChangeCount.bind(e,n,r)})),h.a.createElement(d.Flex,{justify:"center",align:"center",mx:10,flex:"1"},h.a.createElement("small",{className:Object(u.css)({whiteSpace:"nowrap"})},"event(s) in")),h.a.createElement(d.Box,{flex:"2"},h.a.createElement(M.a,{name:"rateLimit.window",allowedValues:Array.from(G.keys()),value:r&&r.window,placeholder:Object(O.t)("Window"),formatLabel:Q,onChange:e.handleChangeWindow.bind(e,a,n,r)})))})):h.a.createElement(L.c,{disablePadding:!1},i.map(function(e){return e(o,r,n)}).shift()))):null}}]),t}(h.a.Component),i.propTypes={organization:m.a.object.isRequired,project:m.a.object.isRequired,data:A.e.ProjectKey.isRequired,enabled:m.a.bool,hooksDisabled:m.a.arrayOf(m.a.func)},l),$=j()({displayName:"KeySettings",propTypes:{organization:m.a.object.isRequired,project:m.a.object.isRequired,access:m.a.object.isRequired,data:A.e.ProjectKey.isRequired,onRemove:m.a.func.isRequired,rateLimitsEnabled:m.a.bool,jsSdkLoaderEnabled:m.a.bool},mixins:[w.default],getInitialState:function(){return{hooksDisabled:T.default.get("project:rate-limits:disabled")}},handleRemove:function(e){var t=this;if(!this.state.loading){var a=Object(v.b)(Object(O.t)("Saving changes..")),n=this.props.params,r=n.keyId,o=n.orgId,i=n.projectId;this.api.request("/projects/"+o+"/"+i+"/keys/"+r+"/",{method:"DELETE",success:function(e,n,r){t.props.onRemove(),Object(v.e)(a),Object(v.d)(Object(O.t)("Revoked key"))},error:function(){t.setState({error:!0,loading:!1}),Object(v.e)(a),Object(v.a)(Object(O.t)("Unable to revoke key"))}})}},render:function(){var e=this.props.params,t=e.keyId,a=e.orgId,n=e.projectId,r=this.props,o=r.access,i=r.data,l=r.rateLimitsEnabled,c=r.jsSdkLoaderEnabled,s=r.organization,u=r.project,d="/projects/"+a+"/"+n+"/keys/"+t+"/";return h.a.createElement(h.a.Fragment,null,h.a.createElement(R.a,{saveOnBlur:!0,allowUndo:!0,apiEndpoint:d,apiMethod:"PUT",initialData:i},h.a.createElement(L.a,null,h.a.createElement(L.e,null,Object(O.t)("Details")),h.a.createElement(L.c,null,h.a.createElement(W.a,{name:"name",label:Object(O.t)("Name"),required:!1}),h.a.createElement(k.a,{name:"isActive",label:Object(O.t)("Enabled"),required:!1,help:"Accept events from this key? This may be used to temporarily suspend a key."}),h.a.createElement(D.a,{label:Object(O.t)("Created")},h.a.createElement("div",{className:"controls"},h.a.createElement(C.default,{date:i.dateCreated})))))),h.a.createElement(Z,{params:this.props.params,data:i,organization:s,project:u,enabled:l,hooksDisabled:this.state.hooksDisabled}),c&&h.a.createElement(R.a,{saveOnBlur:!0,allowUndo:!0,apiEndpoint:d,apiMethod:"PUT",initialData:i},h.a.createElement(L.a,null,h.a.createElement(L.e,null,Object(O.t)("CDN")),h.a.createElement(L.c,null,h.a.createElement(D.a,{help:Object(O.t)("Copy this into your website and you are good to go"),inline:!1,flexibleControlStateSize:!0},h.a.createElement(Y.a,null,"<script src='"+i.dsn.cdn+"'><\/script>"))))),h.a.createElement(L.a,null,h.a.createElement(L.e,null,Object(O.t)("Credentials")),h.a.createElement(L.c,null,h.a.createElement(L.b,{type:"info",icon:"icon-circle-exclamation",m:0,mb:0},Object(O.t)("Your credentials are coupled to a public and secret key. Different clients will require different credentials, so make sure you check the documentation before plugging things in.")),h.a.createElement(q.a,{projectId:""+i.projectId,data:i,showPublicKey:!0,showSecretKey:!0,showProjectId:!0}))),o.has("project:admin")&&h.a.createElement(L.a,null,h.a.createElement(L.e,null,Object(O.t)("Revoke Key")),h.a.createElement(L.c,null,h.a.createElement(D.a,{label:Object(O.t)("Revoke Key"),help:Object(O.t)("Revoking this key will immediately remove and suspend the credentials. This action is irreversible.")},h.a.createElement("div",null,h.a.createElement(x.a,{priority:"danger",message:Object(O.t)("Are you sure you want to revoke this key? This will immediately remove and suspend the credentials."),onConfirm:this.handleRemove,confirmText:Object(O.t)("Revoke Key")},h.a.createElement(_.default,{priority:"danger"},Object(O.t)("Revoke Key"))))))))}}),ee=(s=c=function(e){function t(){var e,a,o,i;n(this,t);for(var l=arguments.length,c=Array(l),s=0;s<l;s++)c[s]=arguments[s];return a=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),o.handleRemove=function(e){var t=o.props.params,a=t.orgId,n=t.projectId;p.browserHistory.push("/"+a+"/"+n+"/settings/keys/")},i=a,r(o,i)}return o(t,e),J(t,[{key:"getTitle",value:function(){return Object(O.t)("Key Details")}},{key:"getEndpoints",value:function(){var e=this.props.params,t=e.keyId;return[["data","/projects/"+e.orgId+"/"+e.projectId+"/keys/"+t+"/"]]}},{key:"renderBody",value:function(){var e=this.state.data,t=this.props.params,a=this.context,n=a.organization,r=a.project,o=Object(g.b)(n).getAccess(),i=new Set(r.features),l=i.has("rate-limits"),c=new Set(n.features),s=c.has("relay");return h.a.createElement("div",{className:"ref-key-details"},h.a.createElement(U.default,{title:Object(O.t)("Key Details")}),h.a.createElement(X,{params:t}),h.a.createElement($,{organization:n,project:r,access:o,params:t,rateLimitsEnabled:l,jsSdkLoaderEnabled:s,data:e,onRemove:this.handleRemove}))}}]),t}(S.default),c.contextTypes={organization:A.e.Organization,project:A.e.Project},s),te=Object(E.default)("div",{target:"emcm7bp0"})("font-size:1.3em;")},1645:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,l,c=a(14),s=a(1),u=a.n(s),d=a(0),p=a.n(d),f=a(31),m=a.n(f),b=a(5),h=a(389),y=a(390),j=a(26),E=a(604),v=a(24),g=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),O=Object(b.default)(function(e){return p.a.createElement("input",e)},{target:"e1usehz70"})(h.a,";background-color:",function(e){return e.theme.offWhite},";border-right-width:0;border-top-right-radius:0;border-bottom-right-radius:0;&:hover,&:focus{background-color:",function(e){return e.theme.offWhite},";border-right-width:0;}"),w=Object(b.default)("div",{target:"e1usehz71"})("flex-grow:1;border:none;"),S=Object(b.default)(j.default,{target:"e1usehz72"})("flex-shrink:1;border-radius:0 0.25em 0.25em 0;box-shadow:none;"),k=(l=i=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleCopyClick=function(e){if(a.textRef){var t=a.props.onCopy;a.handleSelectText(),t(a.props.children,e),e.stopPropagation()}},a.handleSelectText=function(){a.textRef&&Object(y.a)(m.a.findDOMNode(a.textRef))},a.handleAutoMount=function(e){a.textRef=e},a}return o(t,e),g(t,[{key:"render",value:function(){var e=this.props,t=e.style,a=e.children;return p.a.createElement(c.Flex,null,p.a.createElement(w,null,p.a.createElement(O,{readOnly:!0,ref:this.handleAutoMount,style:t,value:a,onClick:this.handleSelectText})),p.a.createElement(E.a,{hideUnsupported:!0,onClick:this.handleCopyClick,value:a},p.a.createElement(S,{type:"button",size:"xsmall",onClick:this.handleCopyClick},p.a.createElement(v.a,{src:"icon-clipboard",size:"1.25em"}))))}}]),t}(p.a.Component),i.propTypes={children:u.a.string.isRequired,style:u.a.object,onCopy:u.a.func},i.defaultProps={onCopy:function(){}},l);t.a=k},1730:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,l,c=a(1),s=a.n(c),u=a(0),d=a.n(u),p=a(2),f=a(71),m=a(602),b=a(1645),h=a(6),y=a(603),j=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),E=(l=i=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),j(t,[{key:"render",value:function(){var e=this.props,t=e.projectId,a=e.data,n=e.showDsn,r=e.showDsnPublic,o=e.showSecurityEndpoint,i=e.showMinidump,l=e.showPublicKey,c=e.showSecretKey,s=e.showProjectId;return d.a.createElement(d.a.Fragment,null,r&&d.a.createElement(m.a,{label:Object(p.t)("DSN"),inline:!1,flexibleControlStateSize:!0},d.a.createElement(b.a,null,Object(y.a)({value:a.dsn.public,fixed:"__DSN__"}))),n&&d.a.createElement(m.a,{label:Object(p.t)("DSN (Deprecated)"),help:Object(p.t)("This DSN includes the secret which is no longer required by Sentry or newer versions of SDKs."),inline:!1,flexibleControlStateSize:!0},d.a.createElement(b.a,null,Object(y.a)({value:a.dsn.secret,fixed:"__DSN_DEPRECATED__"}))),o&&d.a.createElement(m.a,{label:Object(p.t)("Security Header Endpoint"),help:Object(p.t)("Use your security header endpoint for features like CSP and Expect-CT reports."),inline:!1,flexibleControlStateSize:!0},d.a.createElement(b.a,null,Object(y.a)({value:a.dsn.security,fixed:"__SECURITY_HEADER_ENDPOINT__"}))),i&&d.a.createElement(m.a,{label:Object(p.t)("Minidump Endpoint"),help:Object(p.tct)("Use this endpoint to upload [link], for example with Electron, Crashpad or Breakpad.",{link:d.a.createElement(f.a,{href:"https://docs.sentry.io/clients/minidump/"},"minidump crash reports")}),inline:!1,flexibleControlStateSize:!0},d.a.createElement(b.a,null,Object(y.a)({value:a.dsn.minidump,fixed:"__MINIDUMP_ENDPOINT__"}))),l&&d.a.createElement(m.a,{label:Object(p.t)("Public Key"),inline:!0,flexibleControlStateSize:!0},d.a.createElement(b.a,null,Object(y.a)({value:a.public,fixed:"__PUBLICKEY__"}))),c&&d.a.createElement(m.a,{label:Object(p.t)("Secret Key"),inline:!0,flexibleControlStateSize:!0},d.a.createElement(b.a,null,Object(y.a)({value:a.secret,fixed:"__SECRETKEY__"}))),s&&d.a.createElement(m.a,{label:Object(p.t)("Project ID"),inline:!0,flexibleControlStateSize:!0},d.a.createElement(b.a,null,Object(y.a)({value:t,fixed:"__PROJECTID__"}))))}}]),t}(d.a.Component),i.propTypes={projectId:s.a.string.isRequired,data:h.e.ProjectKey,showDsn:s.a.bool,showDsnPublic:s.a.bool,showSecurityEndpoint:s.a.bool,showMinidump:s.a.bool,showPublicKey:s.a.bool,showSecretKey:s.a.bool,showProjectId:s.a.bool},i.defaultProps={showDsn:!0,showDsnPublic:!0,showSecurityEndpoint:!0,showMinidump:!0,showPublicKey:!1,showSecretKey:!1,showProjectId:!1},l);t.a=E}});
//# sourceMappingURL=ProjectKeyDetails.js.map