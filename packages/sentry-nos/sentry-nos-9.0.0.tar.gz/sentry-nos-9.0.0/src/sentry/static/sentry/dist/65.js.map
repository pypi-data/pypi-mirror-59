{"version":3,"sources":["webpack:///65.js","webpack:///./app/views/settings/organizationTeams/teamDetails.jsx"],"names":["webpackJsonpexports","1614","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_react_router__","__WEBPACK_IMPORTED_MODULE_1_prop_types__","__WEBPACK_IMPORTED_MODULE_1_prop_types___default","n","__WEBPACK_IMPORTED_MODULE_2_react__","__WEBPACK_IMPORTED_MODULE_2_react___default","__WEBPACK_IMPORTED_MODULE_3_create_react_class__","__WEBPACK_IMPORTED_MODULE_3_create_react_class___default","__WEBPACK_IMPORTED_MODULE_4_reflux__","__WEBPACK_IMPORTED_MODULE_4_reflux___default","__WEBPACK_IMPORTED_MODULE_5_app_actionCreators_teams__","__WEBPACK_IMPORTED_MODULE_6_app_locale__","__WEBPACK_IMPORTED_MODULE_7_app_mixins_apiMixin__","__WEBPACK_IMPORTED_MODULE_8_app_components_dropdownLink__","__WEBPACK_IMPORTED_MODULE_9_app_components_idBadge__","__WEBPACK_IMPORTED_MODULE_10_app_components_listLink__","__WEBPACK_IMPORTED_MODULE_11_app_components_loadingError__","__WEBPACK_IMPORTED_MODULE_12_app_components_loadingIndicator__","__WEBPACK_IMPORTED_MODULE_13_app_components_menuItem__","__WEBPACK_IMPORTED_MODULE_14_app_mixins_organizationState__","__WEBPACK_IMPORTED_MODULE_15_app_stores_teamStore__","__WEBPACK_IMPORTED_MODULE_16_app_utils_recreateRoute__","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","TeamDetails","displayName","propTypes","routes","a","array","mixins","listenTo","getInitialState","team","getBySlug","this","props","params","teamId","loading","initialized","error","componentWillReceiveProps","nextProps","orgId","setState","fetchData","onTeamStoreUpdate","api","onTeamChange","data","state","slug","push","render","_props","children","createElement","onRetry","routePrefix","stepBack","access","getAccess","onNewSettings","startsWith","features","Set","context","organization","has","hideAvatar","avatarSize","name","anchorRight","title","href","className","to","cloneElement"],"mappings":"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","file":"65.js","sourcesContent":["webpackJsonpexports([65],{\n\n/***/ 1614:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react_router__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_create_react_class__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_create_react_class___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_create_react_class__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_reflux__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_reflux___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_reflux__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_app_actionCreators_teams__ = __webpack_require__(607);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_app_locale__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_app_mixins_apiMixin__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_app_components_dropdownLink__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_app_components_idBadge__ = __webpack_require__(267);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_app_components_listLink__ = __webpack_require__(122);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_app_components_loadingError__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_app_components_loadingIndicator__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_app_components_menuItem__ = __webpack_require__(44);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_app_mixins_organizationState__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15_app_stores_teamStore__ = __webpack_require__(150);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16_app_utils_recreateRoute__ = __webpack_require__(148);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar TeamDetails = __WEBPACK_IMPORTED_MODULE_3_create_react_class___default()({\n  displayName: 'TeamDetails',\n\n  propTypes: {\n    routes: __WEBPACK_IMPORTED_MODULE_1_prop_types___default.a.array\n  },\n\n  mixins: [__WEBPACK_IMPORTED_MODULE_7_app_mixins_apiMixin__[\"default\"], __WEBPACK_IMPORTED_MODULE_14_app_mixins_organizationState__[\"a\" /* default */], __WEBPACK_IMPORTED_MODULE_4_reflux___default.a.listenTo(__WEBPACK_IMPORTED_MODULE_15_app_stores_teamStore__[\"a\" /* default */], 'onTeamStoreUpdate')],\n\n  getInitialState: function getInitialState() {\n    var team = __WEBPACK_IMPORTED_MODULE_15_app_stores_teamStore__[\"a\" /* default */].getBySlug(this.props.params.teamId);\n\n    return {\n      loading: !__WEBPACK_IMPORTED_MODULE_15_app_stores_teamStore__[\"a\" /* default */].initialized,\n      error: false,\n      team: team\n    };\n  },\n  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {\n    var params = this.props.params;\n    if (nextProps.params.teamId !== params.teamId || nextProps.params.orgId !== params.orgId) {\n      this.setState({\n        loading: true,\n        error: false\n      }, this.fetchData);\n    }\n  },\n  onTeamStoreUpdate: function onTeamStoreUpdate() {\n    var team = __WEBPACK_IMPORTED_MODULE_15_app_stores_teamStore__[\"a\" /* default */].getBySlug(this.props.params.teamId);\n    var loading = !__WEBPACK_IMPORTED_MODULE_15_app_stores_teamStore__[\"a\" /* default */].initialized;\n    var error = !loading && !team;\n    this.setState({\n      team: team,\n      error: error,\n      loading: loading\n    });\n  },\n  fetchData: function fetchData() {\n    Object(__WEBPACK_IMPORTED_MODULE_5_app_actionCreators_teams__[\"b\" /* fetchTeamDetails */])(this.api, this.props.params);\n  },\n  onTeamChange: function onTeamChange(data) {\n    var team = this.state.team;\n    if (data.slug !== team.slug) {\n      var orgId = this.props.params.orgId;\n      __WEBPACK_IMPORTED_MODULE_0_react_router__[\"browserHistory\"].push('/organizations/' + orgId + '/teams/' + data.slug + '/settings/');\n    } else {\n      this.setState({\n        team: _extends({}, team, data)\n      });\n    }\n  },\n  render: function render() {\n    var _props = this.props,\n        params = _props.params,\n        routes = _props.routes,\n        children = _props.children;\n\n    var team = this.state.team;\n\n    if (this.state.loading) return __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_12_app_components_loadingIndicator__[\"default\"], null);else if (!team || this.state.error) return __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_11_app_components_loadingError__[\"default\"], { onRetry: this.fetchData });\n\n    var routePrefix = Object(__WEBPACK_IMPORTED_MODULE_16_app_utils_recreateRoute__[\"a\" /* default */])('', { routes: routes, params: params, stepBack: -1 }); //`/organizations/${orgId}/teams/${teamId}`;\n    var access = this.getAccess();\n\n    //TODO(maxbittker) remove hack to not show this page on old settings\n    var onNewSettings = routePrefix.startsWith('/settings/');\n\n    var features = new Set(this.context.organization.features);\n    return __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(\n      'div',\n      null,\n      __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(\n        'h3',\n        null,\n        features.has('new-teams') ? __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9_app_components_idBadge__[\"a\" /* default */], { hideAvatar: true, team: team, avatarSize: 36 }) : team.name\n      ),\n      !features.has('new-settings') && access.has('team:admin') && __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(\n        __WEBPACK_IMPORTED_MODULE_8_app_components_dropdownLink__[\"default\"],\n        { anchorRight: true, title: Object(__WEBPACK_IMPORTED_MODULE_6_app_locale__[\"t\"])('More') },\n        __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(\n          __WEBPACK_IMPORTED_MODULE_13_app_components_menuItem__[\"default\"],\n          {\n            href: '/organizations/' + params.orgId + '/teams/' + params.teamId + '/remove/'\n          },\n          Object(__WEBPACK_IMPORTED_MODULE_6_app_locale__[\"t\"])('Remove Team')\n        )\n      ),\n      __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(\n        'ul',\n        { className: 'nav nav-tabs border-bottom' },\n        __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(\n          __WEBPACK_IMPORTED_MODULE_10_app_components_listLink__[\"default\"],\n          { to: routePrefix + 'members/' },\n          Object(__WEBPACK_IMPORTED_MODULE_6_app_locale__[\"t\"])('Members')\n        ),\n        onNewSettings ? __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(\n          __WEBPACK_IMPORTED_MODULE_10_app_components_listLink__[\"default\"],\n          { to: routePrefix + 'projects/' },\n          Object(__WEBPACK_IMPORTED_MODULE_6_app_locale__[\"t\"])('Projects')\n        ) : null,\n        __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(\n          __WEBPACK_IMPORTED_MODULE_10_app_components_listLink__[\"default\"],\n          { to: routePrefix + 'settings/' },\n          Object(__WEBPACK_IMPORTED_MODULE_6_app_locale__[\"t\"])('Settings')\n        )\n      ),\n      children && __WEBPACK_IMPORTED_MODULE_2_react___default.a.cloneElement(children, {\n        team: team,\n        onTeamChange: this.onTeamChange\n      })\n    );\n  }\n});\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (TeamDetails);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 65.js","import {browserHistory} from 'react-router';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport createReactClass from 'create-react-class';\nimport Reflux from 'reflux';\n\nimport {fetchTeamDetails} from 'app/actionCreators/teams';\nimport {t} from 'app/locale';\nimport ApiMixin from 'app/mixins/apiMixin';\nimport DropdownLink from 'app/components/dropdownLink';\nimport IdBadge from 'app/components/idBadge';\nimport ListLink from 'app/components/listLink';\nimport LoadingError from 'app/components/loadingError';\nimport LoadingIndicator from 'app/components/loadingIndicator';\nimport MenuItem from 'app/components/menuItem';\nimport OrganizationState from 'app/mixins/organizationState';\nimport TeamStore from 'app/stores/teamStore';\nimport recreateRoute from 'app/utils/recreateRoute';\n\nconst TeamDetails = createReactClass({\n  displayName: 'TeamDetails',\n\n  propTypes: {\n    routes: PropTypes.array,\n  },\n\n  mixins: [ApiMixin, OrganizationState, Reflux.listenTo(TeamStore, 'onTeamStoreUpdate')],\n\n  getInitialState() {\n    let team = TeamStore.getBySlug(this.props.params.teamId);\n\n    return {\n      loading: !TeamStore.initialized,\n      error: false,\n      team,\n    };\n  },\n\n  componentWillReceiveProps(nextProps) {\n    let params = this.props.params;\n    if (\n      nextProps.params.teamId !== params.teamId ||\n      nextProps.params.orgId !== params.orgId\n    ) {\n      this.setState(\n        {\n          loading: true,\n          error: false,\n        },\n        this.fetchData\n      );\n    }\n  },\n\n  onTeamStoreUpdate(...args) {\n    let team = TeamStore.getBySlug(this.props.params.teamId);\n    let loading = !TeamStore.initialized;\n    let error = !loading && !team;\n    this.setState({\n      team,\n      error,\n      loading,\n    });\n  },\n\n  fetchData() {\n    fetchTeamDetails(this.api, this.props.params);\n  },\n\n  onTeamChange(data) {\n    let team = this.state.team;\n    if (data.slug !== team.slug) {\n      let orgId = this.props.params.orgId;\n      browserHistory.push(`/organizations/${orgId}/teams/${data.slug}/settings/`);\n    } else {\n      this.setState({\n        team: {\n          ...team,\n          ...data,\n        },\n      });\n    }\n  },\n\n  render() {\n    let {params, routes, children} = this.props;\n    let team = this.state.team;\n\n    if (this.state.loading) return <LoadingIndicator />;\n    else if (!team || this.state.error) return <LoadingError onRetry={this.fetchData} />;\n\n    let routePrefix = recreateRoute('', {routes, params, stepBack: -1}); //`/organizations/${orgId}/teams/${teamId}`;\n    let access = this.getAccess();\n\n    //TODO(maxbittker) remove hack to not show this page on old settings\n    let onNewSettings = routePrefix.startsWith('/settings/');\n\n    const features = new Set(this.context.organization.features);\n    return (\n      <div>\n        <h3>\n          {features.has('new-teams') ? (\n            <IdBadge hideAvatar team={team} avatarSize={36} />\n          ) : (\n            team.name\n          )}\n        </h3>\n\n        {!features.has('new-settings') &&\n          access.has('team:admin') && (\n            <DropdownLink anchorRight title={t('More')}>\n              <MenuItem\n                href={`/organizations/${params.orgId}/teams/${params.teamId}/remove/`}\n              >\n                {t('Remove Team')}\n              </MenuItem>\n            </DropdownLink>\n          )}\n\n        <ul className=\"nav nav-tabs border-bottom\">\n          <ListLink to={`${routePrefix}members/`}>{t('Members')}</ListLink>\n          {onNewSettings ? (\n            <ListLink to={`${routePrefix}projects/`}>{t('Projects')}</ListLink>\n          ) : null}\n          <ListLink to={`${routePrefix}settings/`}>{t('Settings')}</ListLink>\n        </ul>\n\n        {children &&\n          React.cloneElement(children, {\n            team,\n            onTeamChange: this.onTeamChange,\n          })}\n      </div>\n    );\n  },\n});\n\nexport default TeamDetails;\n\n\n\n// WEBPACK FOOTER //\n// ./app/views/settings/organizationTeams/teamDetails.jsx"],"sourceRoot":""}