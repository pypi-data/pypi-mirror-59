webpackJsonpexports([24],{1578:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c,l,i=n(27),u=n(14),s=n(9),f=n(1),p=n.n(f),m=n(0),d=n.n(m),b=n(5),h=n(80),y=n(2),v=n(92),E=n(26),g=n(1702),O=n(103),j=n(1777),w=n(1703),_=n(52),x=n(81),k=n(1778),P=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),C="/users/me/authenticators/",R=Object(b.default)("span",{target:"e1qcww6q0"})("font-weight:bold;margin-right:6px;width:100px;"),T=Object(b.default)("span",{target:"e1qcww6q1"})("font-weight:bold;margin-left:6px;"),B=(l=c=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),P(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.date;return d.a.createElement(u.Flex,{mb:1},d.a.createElement(R,null,t),d.a.createElement(u.Box,{flex:"1"},n?d.a.createElement(O.default,{date:n}):Object(y.t)("never")))}}]),t}(d.a.Component),c.propTypes={label:p.a.string,date:p.a.string},l),z=function(e){function t(){var e;r(this,t);for(var n=arguments.length,o=Array(n),c=0;c<n;c++)o[c]=arguments[c];var l=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o)));return l.handleRemove=function(e){var t=l.state.authenticator;if(t&&t.authId){var n=!!e,r=n?e.key_handle+"/":"";l.setState({loading:!0},function(){return l.api.requestPromise(""+C+t.authId+"/"+r,{method:"DELETE"}).then(function(){l.props.router.push("/settings/account/security");var t=n?e.name:"Authenticator";Object(h.d)(Object(y.t)("%s has been removed",t))},function(){var t=n?e.name:"authenticator";l.addError(Object(y.t)("Error removing %s",t))})})}},l.handleRemoveU2fDevice=function(){},l.handleRegenerateBackupCodes=function(){l.setState({loading:!0},function(){return l.api.requestPromise(""+C+l.props.params.authId+"/",{method:"PUT"}).then(l.remountComponent,function(){return l.addError(Object(y.t)("Error regenerating backup codes"))})})},l._form={},l}return o(t,e),P(t,[{key:"getTitle",value:function(){return Object(y.t)("Security")}},{key:"getEndpoints",value:function(){return[["authenticator",""+C+this.props.params.authId+"/"]]}},{key:"addError",value:function(e){this.setState({loading:!1}),Object(h.a)(e)}},{key:"renderBody",value:function(){var e=this.state.authenticator;return d.a.createElement("div",null,d.a.createElement(_.default,{title:d.a.createElement(d.a.Fragment,null,d.a.createElement("span",null,e.name),d.a.createElement(g.a,{className:Object(i.css)({marginLeft:6}),enabled:e.isEnrolled})),action:e.isEnrolled&&e.removeButton&&d.a.createElement(w.a,{onConfirm:this.handleRemove},d.a.createElement(E.default,{priority:"danger"},e.removeButton))}),d.a.createElement(x.default,null,e.description),d.a.createElement(B,{label:Object(y.t)("Created at"),date:e.createdAt}),d.a.createElement(B,{label:Object(y.t)("Last used"),date:e.lastUsedAt}),d.a.createElement(k.a,{isEnrolled:e.isEnrolled,id:e.id,devices:e.devices,onRemoveU2fDevice:this.handleRemove}),e.isEnrolled&&e.phone&&d.a.createElement("div",{className:Object(i.css)({marginTop:30})},Object(y.t)("Confirmation codes are sent to the following phone number"),":",d.a.createElement(T,null,e.phone)),d.a.createElement(j.a,{onRegenerateBackupCodes:this.handleRegenerateBackupCodes,isEnrolled:e.isEnrolled,codes:e.codes}))}}]),t}(v.default);t.default=Object(s.withRouter)(z)},1698:function(e,t,n){"use strict";var r=n(5),a=Object(r.default)("div",{target:"e1ty3hc0"})("font-size:1.2em;margin-bottom:10px;");t.a=a},1702:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c,l,i=n(0),u=n.n(i),s=n(1),f=n.n(s),p=n(5),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){return"\n  background: "+(e.enabled?e.theme.success:e.theme.error)+";\n"},b=function(e){return"\n  border-radius: "+e.size+"px;\n  height: "+e.size+"px;\n  width: "+e.size+"px;\n"},h=Object(p.default)("div",{target:"eljqieg0"})("display:inline-block;position:relative;",b," ",d,";"),y=(l=c=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),m(t,[{key:"render",value:function(){return u.a.createElement(h,this.props)}}]),t}(u.a.Component),c.propTypes={enabled:f.a.bool.isRequired,size:f.a.number.isRequired},c.defaultProps={enabled:!0,size:14},l);t.a=y},1703:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=n(0),l=n.n(c),i=n(2),u=n(1698),s=n(119),f=n(81),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),m(t,[{key:"render",value:function(){return l.a.createElement(s.a,p({message:l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a,null,Object(i.t)("Do you want to remove this method?")),l.a.createElement(f.default,null,Object(i.t)("Removing the last authentication method will disable two-factor authentication completely.")))},this.props))}}]),t}(l.a.Component);t.a=d},1777:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c,l,i=n(27),u=n(14),s=n(1),f=n.n(s),p=n(0),m=n.n(p),d=n(5),b=n(2),h=n(26),y=n(604),v=n(119),E=n(178),g=n(24),O=n(18),j=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_=Object(d.default)(function(e){return m.a.createElement(O.f,w({p:2},e))},{target:"e1knlcse0"})("font-family:",function(e){return e.theme.text.familyMono},";"),x=(l=c=function(e){function t(){var e,n,o,c;r(this,t);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return n=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.printCodes=function(){var e=window.frames.printable;e.document.write(o.props.codes.join("<br>")),e.print(),e.document.close()},c=n,a(o,c)}return o(t,e),j(t,[{key:"render",value:function(){var e=this.props,t=e.isEnrolled,n=e.codes;if(!t||!n)return null;var r=n.join(" \n");return m.a.createElement(O.a,{className:Object(i.css)({marginTop:30})},m.a.createElement(O.e,{hasButtons:!0},m.a.createElement(u.Flex,{align:"center"},m.a.createElement(u.Box,null,Object(b.t)("Unused Codes"))),m.a.createElement(u.Flex,null,m.a.createElement(u.Box,{ml:1},m.a.createElement(y.a,{hideUnsupported:!0,value:r},m.a.createElement(h.default,{size:"small"},m.a.createElement(g.a,{src:"icon-copy"})))),m.a.createElement(u.Box,{ml:1},m.a.createElement(h.default,{size:"small",onClick:this.printCodes},m.a.createElement(g.a,{src:"icon-print"}))),m.a.createElement(u.Box,{ml:1},m.a.createElement(h.default,{size:"small",download:"sentry-recovery-codes.txt",href:"data:text/plain;charset=utf-8,"+r},m.a.createElement(g.a,{src:"icon-download"}))),m.a.createElement(u.Box,{ml:1},m.a.createElement(v.a,{onConfirm:this.props.onRegenerateBackupCodes,message:Object(b.t)("Are you sure you want to regenerate recovery codes? Your old codes will no longer work.")},m.a.createElement(h.default,{priority:"danger",size:"small"},Object(b.t)("Regenerate Codes")))))),m.a.createElement(O.c,null,m.a.createElement(O.b,{type:"warning"},m.a.createElement(u.Flex,{align:"center",ml:1,flex:"1"},Object(b.t)("Make sure to save a copy of your recovery codes and store them in a safe place."))),m.a.createElement(u.Box,null,!!n.length&&n.map(function(e){return m.a.createElement(_,{key:e},e)})),!n.length&&m.a.createElement(E.a,null,Object(b.t)("You have no more recovery codes to use"))),m.a.createElement("iframe",{name:"printable",className:Object(i.css)({display:"none"})}))}}]),t}(m.a.Component),c.propTypes={isEnrolled:f.a.bool,codes:f.a.arrayOf(f.a.string),onRegenerateBackupCodes:f.a.func.isRequired},l);t.a=x},1778:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c,l,i=n(27),u=n(14),s=n(1),f=n.n(s),p=n(0),m=n.n(p),d=n(2),b=n(26),h=n(119),y=n(1698),v=n(103),E=n(18),g=n(81),O=n(178),j=n(21),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=(l=c=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),w(t,[{key:"render",value:function(){var e=this.props,t=e.isEnrolled,n=e.devices,r=e.id,a=e.onRemoveU2fDevice;if("u2f"!==r||!t)return null;var o=n&&n.length,c=1===o;return m.a.createElement(E.a,{className:Object(i.css)({marginTop:30})},m.a.createElement(E.e,null,Object(d.t)("Device name")),m.a.createElement(E.c,null,!o&&m.a.createElement(O.a,null,Object(d.t)("You have not added any U2F devices")),o&&n.map(function(e){return m.a.createElement(E.f,{p:0,key:e.name},m.a.createElement(u.Flex,{p:2,pr:0,align:"center",flex:"1"},m.a.createElement(u.Box,{flex:"1"},e.name),m.a.createElement("div",{className:Object(i.css)({fontSize:"0.8em",opacity:.6})},m.a.createElement(v.default,{date:e.timestamp}))),m.a.createElement(u.Box,{p:2},m.a.createElement(h.a,{onConfirm:function(){return a(e)},disabled:c,message:m.a.createElement(m.a.Fragment,null,m.a.createElement(y.a,null,Object(d.t)("Do you want to remove U2F device?")),m.a.createElement(g.default,null,Object(d.t)('Are you sure you want to remove the U2F device "'+e.name+'"?')))},m.a.createElement(b.default,{size:"small",priority:"danger"},m.a.createElement(j.default,{disabled:!c,title:Object(d.t)("Can not remove last U2F device")},m.a.createElement("span",{className:"icon icon-trash"}))))))}),m.a.createElement(E.f,{justify:"flex-end",p:2},m.a.createElement(b.default,{type:"button",to:"/settings/account/security/u2f/enroll/"},Object(d.t)("Add Another Device")))))}}]),t}(m.a.Component),c.propTypes={isEnrolled:f.a.bool,id:f.a.string,devices:f.a.arrayOf(f.a.shape({name:f.a.string,timestamp:f.a.any})),onRemoveU2fDevice:f.a.func.isRequired},l);t.a=_}});
//# sourceMappingURL=AccountSecurityDetails.js.map