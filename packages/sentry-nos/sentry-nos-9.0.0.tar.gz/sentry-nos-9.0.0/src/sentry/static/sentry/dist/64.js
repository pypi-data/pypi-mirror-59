webpackJsonpexports([64],{1594:function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"default",function(){return S});var i,c,s=r(1),l=r.n(s),u=r(9),p=r(0),d=r.n(p),f=r(3),h=r.n(f),v=r(2),m=r(8),g=r(92),y=r(26),b=r(178),j=r(602),k=r(30),E=r(18),w=r(52),O=r(214),I=r(413),T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),R=h()({displayName:"ServiceHookRow",propTypes:{orgId:l.a.string.isRequired,projectId:l.a.string.isRequired,hook:l.a.object.isRequired,onToggleActive:l.a.func.isRequired},mixins:[m.default],getInitialState:function(){return{loading:!1,error:!1}},render:function(){var e=this.props,t=e.orgId,r=e.projectId,o=e.hook;return d.a.createElement(j.a,{label:d.a.createElement(u.Link,{to:"/settings/"+t+"/"+r+"/hooks/"+o.id+"/"},d.a.createElement(I.a,{value:o.url})),help:o.events&&0!==o.events.length?d.a.createElement("small",null,o.events.join(", ")):d.a.createElement("small",null,d.a.createElement("em",null,"no events configured"))},d.a.createElement(O.default,{isActive:"active"===o.status,size:"lg",toggle:this.props.onToggleActive}))}}),S=(c=i=function(e){function t(){var e,r,a,i;o(this,t);for(var c=arguments.length,s=Array(c),l=0;l<c;l++)s[l]=arguments[l];return r=a=n(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.onToggleActive=function(e){var t=a.props.params,r=t.orgId,o=t.projectId,n=k.default.add(Object(v.t)("Saving changes.."));a.api.request("/projects/"+r+"/"+o+"/hooks/"+e.id+"/",{method:"PUT",data:{isActive:"active"!==e.status},success:function(e){k.default.remove(n);var t=a.state.hookList.map(function(t){return t.id===e.id?T({},t,e):t});a.setState({hookList:t})},error:function(){k.default.remove(n),k.default.add(Object(v.t)("Unable to remove application. Please try again."),"error",{duration:3e3})}})},i=r,n(a,i)}return a(t,e),_(t,[{key:"getEndpoints",value:function(){var e=this.props.params;return[["hookList","/projects/"+e.orgId+"/"+e.projectId+"/hooks/"]]}},{key:"renderEmpty",value:function(){return d.a.createElement(b.a,null,Object(v.t)("There are no service hooks associated with this project."))}},{key:"renderResults",value:function(){var e=this,t=this.props.params,r=t.orgId,o=t.projectId;return d.a.createElement(d.a.Fragment,null,d.a.createElement(E.e,{key:"header"},Object(v.t)("Service Hook")),d.a.createElement(E.c,{key:"body"},d.a.createElement(E.b,{type:"info",icon:"icon-circle-exclamation",m:0,mb:0},"Service Hooks are an early adopter preview feature and will change in the future."),this.state.hookList.map(function(t){return d.a.createElement(R,{key:t.id,orgId:r,projectId:o,hook:t,onToggleActive:e.onToggleActive.bind(e,t)})})))}},{key:"renderBody",value:function(){var e=void 0;e=this.state.hookList.length>0?this.renderResults():this.renderEmpty();var t=this.props.params,r=t.orgId,o=t.projectId,n=new Set(this.context.organization.access);return d.a.createElement("div",{className:"ref-project-service-hooks"},d.a.createElement(w.default,{title:Object(v.t)("Service Hooks"),action:n.has("project:write")?d.a.createElement(y.default,{"data-test-id":"new-service-hook",to:"/settings/"+r+"/"+o+"/hooks/new/",size:"small",priority:"primary"},d.a.createElement("span",{className:"icon-plus"}),"Â ",Object(v.t)("Create New Hook")):null}),d.a.createElement(E.a,null,e))}}]),t}(g.default),i.contextTypes={organization:l.a.object.isRequired},c)}});
//# sourceMappingURL=ProjectServiceHooks.js.map