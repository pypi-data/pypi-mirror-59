{"version":3,"sources":["webpack:///62.js","webpack:///./app/views/settings/account/accountIdentities.jsx","webpack:///./app/actionCreators/account.jsx"],"names":["webpackJsonpexports","1580","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_grid_emotion__","__WEBPACK_IMPORTED_MODULE_1_react__","__WEBPACK_IMPORTED_MODULE_1_react___default","n","__WEBPACK_IMPORTED_MODULE_2_app_actionCreators_account__","__WEBPACK_IMPORTED_MODULE_3_app_locale__","__WEBPACK_IMPORTED_MODULE_4_app_views_asyncView__","__WEBPACK_IMPORTED_MODULE_5_app_components_buttons_button__","__WEBPACK_IMPORTED_MODULE_6_app_views_settings_components_emptyMessage__","__WEBPACK_IMPORTED_MODULE_7_app_components_panels__","__WEBPACK_IMPORTED_MODULE_8_app_views_settings_components_settingsPageHeader__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","AccountIdentities","_AsyncView","_ref","_temp","_this","_ret","this","_len","arguments","args","Array","_key","getPrototypeOf","apply","concat","handleDisconnect","identity","e","identities","state","setState","filter","_ref2","id","catch","_this2","isEmpty","a","createElement","title","disablePadding","px","map","p","align","flex","providerLabel","size","onClick","bind","1728","disconnectIdentity","api","__WEBPACK_IMPORTED_MODULE_0_app_api__","request","requestPromise","method","then","__WEBPACK_IMPORTED_MODULE_2_app_stores_indicatorStore__","addSuccess","addError","updateUser","user","__WEBPACK_IMPORTED_MODULE_1_app_stores_configStore__","set"],"mappings":"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","file":"62.js","sourcesContent":["webpackJsonpexports([62],{\n\n/***/ 1580:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_grid_emotion__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_app_actionCreators_account__ = __webpack_require__(1728);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_app_locale__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_app_views_asyncView__ = __webpack_require__(92);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_app_components_buttons_button__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_app_views_settings_components_emptyMessage__ = __webpack_require__(178);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_app_components_panels__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_app_views_settings_components_settingsPageHeader__ = __webpack_require__(52);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\n\n\n\nvar ENDPOINT = '/users/me/social-identities/';\n\nvar AccountIdentities = function (_AsyncView) {\n  _inherits(AccountIdentities, _AsyncView);\n\n  function AccountIdentities() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, AccountIdentities);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = AccountIdentities.__proto__ || Object.getPrototypeOf(AccountIdentities)).call.apply(_ref, [this].concat(args))), _this), _this.handleDisconnect = function (identity, e) {\n      var identities = _this.state.identities;\n\n\n      _this.setState(function (state) {\n        var newIdentities = state.identities.filter(function (_ref2) {\n          var id = _ref2.id;\n          return id !== identity.id;\n        });\n\n        return {\n          identities: newIdentities\n        };\n      }, function () {\n        return Object(__WEBPACK_IMPORTED_MODULE_2_app_actionCreators_account__[\"a\" /* disconnectIdentity */])(identity).catch(function () {\n          _this.setState({\n            identities: identities\n          });\n        });\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(AccountIdentities, [{\n    key: 'getEndpoints',\n    value: function getEndpoints() {\n      return [['identities', ENDPOINT]];\n    }\n  }, {\n    key: 'getTitle',\n    value: function getTitle() {\n      return 'Identities';\n    }\n  }, {\n    key: 'getDefaultState',\n    value: function getDefaultState() {\n      return {\n        identities: []\n      };\n    }\n  }, {\n    key: 'renderBody',\n    value: function renderBody() {\n      var _this2 = this;\n\n      var isEmpty = this.state.identities.length === 0;\n\n      return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n        'div',\n        null,\n        __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8_app_views_settings_components_settingsPageHeader__[\"default\"], { title: 'Identities' }),\n        __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n          __WEBPACK_IMPORTED_MODULE_7_app_components_panels__[\"a\" /* Panel */],\n          null,\n          __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n            __WEBPACK_IMPORTED_MODULE_7_app_components_panels__[\"e\" /* PanelHeader */],\n            { disablePadding: true },\n            __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n              __WEBPACK_IMPORTED_MODULE_0_grid_emotion__[\"Box\"],\n              { px: 2 },\n              Object(__WEBPACK_IMPORTED_MODULE_3_app_locale__[\"t\"])('Identities')\n            )\n          ),\n          __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n            __WEBPACK_IMPORTED_MODULE_7_app_components_panels__[\"c\" /* PanelBody */],\n            null,\n            isEmpty && __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n              __WEBPACK_IMPORTED_MODULE_6_app_views_settings_components_emptyMessage__[\"a\" /* default */],\n              null,\n              Object(__WEBPACK_IMPORTED_MODULE_3_app_locale__[\"t\"])('There are no identities associated with this account')\n            ),\n            !isEmpty && this.state.identities.map(function (identity) {\n              return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n                __WEBPACK_IMPORTED_MODULE_7_app_components_panels__[\"f\" /* PanelItem */],\n                { p: 0, key: identity.id, align: 'center' },\n                __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n                  __WEBPACK_IMPORTED_MODULE_0_grid_emotion__[\"Box\"],\n                  { flex: '1', p: 2 },\n                  identity.providerLabel\n                ),\n                __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n                  __WEBPACK_IMPORTED_MODULE_0_grid_emotion__[\"Box\"],\n                  { p: 2 },\n                  __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n                    __WEBPACK_IMPORTED_MODULE_5_app_components_buttons_button__[\"default\"],\n                    {\n                      size: 'small',\n                      onClick: _this2.handleDisconnect.bind(_this2, identity)\n                    },\n                    Object(__WEBPACK_IMPORTED_MODULE_3_app_locale__[\"t\"])('Disconnect')\n                  )\n                )\n              );\n            })\n          )\n        )\n      );\n    }\n  }]);\n\n  return AccountIdentities;\n}(__WEBPACK_IMPORTED_MODULE_4_app_views_asyncView__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (AccountIdentities);\n\n/***/ }),\n\n/***/ 1728:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = disconnectIdentity;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = updateUser;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_app_api__ = __webpack_require__(46);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_app_stores_configStore__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_app_stores_indicatorStore__ = __webpack_require__(30);\n\n\n\n\nfunction disconnectIdentity(identity) {\n  var api = new __WEBPACK_IMPORTED_MODULE_0_app_api__[\"Client\"]();\n  var request = api.requestPromise('/users/me/social-identities/' + identity.id + '/', {\n    method: 'DELETE'\n  });\n\n  request.then(function () {\n    __WEBPACK_IMPORTED_MODULE_2_app_stores_indicatorStore__[\"default\"].addSuccess('Disconnected ' + identity.providerLabel);\n  }).catch(function () {\n    __WEBPACK_IMPORTED_MODULE_2_app_stores_indicatorStore__[\"default\"].addError('Error disconnecting identity');\n  });\n\n  return request;\n}\n\nfunction updateUser(user) {\n  // Ideally we'd fire an action but this is gonna get refactored soon anyway\n  __WEBPACK_IMPORTED_MODULE_1_app_stores_configStore__[\"default\"].set('user', user);\n}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 62.js","import {Box} from 'grid-emotion';\nimport React from 'react';\n\nimport {disconnectIdentity} from 'app/actionCreators/account';\nimport {t} from 'app/locale';\nimport AsyncView from 'app/views/asyncView';\nimport Button from 'app/components/buttons/button';\nimport EmptyMessage from 'app/views/settings/components/emptyMessage';\nimport {Panel, PanelBody, PanelHeader, PanelItem} from 'app/components/panels';\nimport SettingsPageHeader from 'app/views/settings/components/settingsPageHeader';\n\nconst ENDPOINT = '/users/me/social-identities/';\n\nclass AccountIdentities extends AsyncView {\n  getEndpoints() {\n    return [['identities', ENDPOINT]];\n  }\n\n  getTitle() {\n    return 'Identities';\n  }\n\n  getDefaultState() {\n    return {\n      identities: [],\n    };\n  }\n\n  handleDisconnect = (identity, e) => {\n    let {identities} = this.state;\n\n    this.setState(\n      state => {\n        let newIdentities = state.identities.filter(({id}) => id !== identity.id);\n\n        return {\n          identities: newIdentities,\n        };\n      },\n      () =>\n        disconnectIdentity(identity).catch(() => {\n          this.setState({\n            identities,\n          });\n        })\n    );\n  };\n\n  renderBody() {\n    let isEmpty = this.state.identities.length === 0;\n\n    return (\n      <div>\n        <SettingsPageHeader title=\"Identities\" />\n        <Panel>\n          <PanelHeader disablePadding>\n            <Box px={2}>{t('Identities')}</Box>\n          </PanelHeader>\n          <PanelBody>\n            {isEmpty && (\n              <EmptyMessage>\n                {t('There are no identities associated with this account')}\n              </EmptyMessage>\n            )}\n\n            {!isEmpty &&\n              this.state.identities.map(identity => (\n                <PanelItem p={0} key={identity.id} align=\"center\">\n                  <Box flex=\"1\" p={2}>\n                    {identity.providerLabel}\n                  </Box>\n\n                  <Box p={2}>\n                    <Button\n                      size=\"small\"\n                      onClick={this.handleDisconnect.bind(this, identity)}\n                    >\n                      {t('Disconnect')}\n                    </Button>\n                  </Box>\n                </PanelItem>\n              ))}\n          </PanelBody>\n        </Panel>\n      </div>\n    );\n  }\n}\n\nexport default AccountIdentities;\n\n\n\n// WEBPACK FOOTER //\n// ./app/views/settings/account/accountIdentities.jsx","import {Client} from 'app/api';\nimport ConfigStore from 'app/stores/configStore';\nimport IndicatorStore from 'app/stores/indicatorStore';\n\nexport function disconnectIdentity(identity) {\n  const api = new Client();\n  let request = api.requestPromise(`/users/me/social-identities/${identity.id}/`, {\n    method: 'DELETE',\n  });\n\n  request\n    .then(() => {\n      IndicatorStore.addSuccess(`Disconnected ${identity.providerLabel}`);\n    })\n    .catch(() => {\n      IndicatorStore.addError('Error disconnecting identity');\n    });\n\n  return request;\n}\n\nexport function updateUser(user) {\n  // Ideally we'd fire an action but this is gonna get refactored soon anyway\n  ConfigStore.set('user', user);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/actionCreators/account.jsx"],"sourceRoot":""}