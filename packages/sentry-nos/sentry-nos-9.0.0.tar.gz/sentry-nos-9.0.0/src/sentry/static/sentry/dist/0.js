webpackJsonpexports([0],{1636:function(e,t){var n=Object.prototype.toString;e.exports=function(e){switch(n.call(e)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===e?"null":void 0===e?"undefined":e!==e?"nan":e&&1===e.nodeType?"element":typeof(e=e.valueOf?e.valueOf():Object.prototype.valueOf.apply(e))}},1637:function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,l,u,c,f,p=n(14),d=n(1),h=n.n(d),m=n(0),b=n.n(m),g=n(1638),v=n.n(g),y=n(10),O=n(601),j=n(18),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),S=(l=s=function(e){function t(e){var n;r(this,t);for(var a=arguments.length,o=Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];var l=i(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this,e].concat(o)));return u.call(l),l.state={highlighted:l.getLocation(e).hash},l}return o(t,e),E(t,[{key:"componentDidMount",value:function(){this.scrollToHash()}},{key:"componentWillReceiveProps",value:function(e,t){if(this.getLocation(this.props).hash!==this.getLocation(e).hash){var n=this.getLocation(e).hash;this.scrollToHash(n),this.setState({highlighted:n})}}},{key:"scrollToHash",value:function(e){var t=e||this.getLocation(this.props).hash;t&&v()(t,{align:"middle",offset:-100})}},{key:"render",value:function(){var e=this.props,t=e.forms,n=e.title,r=e.fields,i=e.access,o=e.features,s=e.additionalFieldProps,l=e.renderFooter,u=e.renderHeader,c=(e.location,a(e,["forms","title","fields","access","features","additionalFieldProps","renderFooter","renderHeader","location"])),f=Object(y.d)(t),d={access:i,features:o,additionalFieldProps:s,renderFooter:l,renderHeader:u,highlighted:this.state.highlighted};return b.a.createElement(p.Box,c,f?t.map(function(e){return b.a.createElement(_,w({key:e.title,title:e.title,fields:e.fields},d))}):b.a.createElement(_,w({title:n,fields:r},d)))}}]),t}(b.a.Component),s.propTypes={forms:h.a.arrayOf(h.a.shape({title:h.a.string,fields:h.a.arrayOf(h.a.oneOfType([h.a.func,O.a.propTypes.field]))})),fields:h.a.arrayOf(h.a.oneOfType([h.a.func,O.a.propTypes.field])),title:h.a.string,access:h.a.object,features:h.a.object,additionalFieldProps:h.a.object,renderFooter:h.a.func,renderHeader:h.a.func},s.defaultProps={additionalFieldProps:{}},s.contextTypes={location:h.a.object},u=function(){var e=this;this.getLocation=function(t){return t.location||e.context.location||{}}},l);t.a=S;var _=(f=c=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),E(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.fields,i=t.access,o=t.additionalFieldProps,s=t.renderFooter,l=t.renderHeader,u=(t.location,a(t,["title","fields","access","additionalFieldProps","renderFooter","renderHeader","location"])),c="function"==typeof s,f="function"==typeof l;return b.a.createElement(j.a,{key:n,id:n},b.a.createElement(j.e,null,n),b.a.createElement(j.c,null,f&&l({title:n,fields:r}),r.map(function(t){if("function"==typeof t)return t();var n=(t.defaultValue,a(t,["defaultValue"]));return b.a.createElement(O.a,w({access:i,key:t.name},u,o,{field:n,highlighted:e.props.highlighted==="#"+t.name}))}),c&&s({title:n,fields:r})))}}]),t}(b.a.Component),c.propTypes={title:h.a.string,fields:h.a.arrayOf(h.a.oneOfType([h.a.func,O.a.propTypes.field])),access:h.a.object,additionalFieldProps:h.a.object,highlighted:h.a.string,renderHeader:h.a.func,renderFooter:h.a.func},f)},1638:function(e,t,n){function a(e,t,n){var a=document.body,r=document.documentElement,i=e.getBoundingClientRect(),o=r.clientHeight,s=Math.max(a.scrollHeight,a.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight);t=t||0;var l;l="bottom"===n?i.bottom-o:"middle"===n?i.bottom-o/2-i.height/2:i.top;var u=s-o;return Math.min(l+t+window.pageYOffset,u)}var r=n(1639);e.exports=function(e,t){if(t=t||{},"string"==typeof e&&(e=document.querySelector(e)),e)return r(0,a(e,t.offset,t.align),t)}},1639:function(e,t,n){function a(e,t,n){function a(){o(a),l.update()}n=n||{};var s=r(),l=i(s).ease(n.ease||"out-circ").to({top:t,left:e}).duration(n.duration||1e3);return l.update(function(e){window.scrollTo(0|e.left,0|e.top)}),l.on("end",function(){a=function(){}}),a(),l}function r(){return{top:window.pageYOffset||document.documentElement.scrollTop,left:window.pageXOffset||document.documentElement.scrollLeft}}var i=n(1640),o=n(1644);e.exports=a},1640:function(e,t,n){function a(e){if(!(this instanceof a))return new a(e);this._from=e,this.ease("linear"),this.duration(500)}var r=n(1641),i=n(1642),o=n(1636),s=n(1643);e.exports=a,r(a.prototype),a.prototype.reset=function(){return this.isArray="array"===o(this._from),this._curr=i(this._from),this._done=!1,this._start=Date.now(),this},a.prototype.to=function(e){return this.reset(),this._to=e,this},a.prototype.duration=function(e){return this._duration=e,this},a.prototype.ease=function(e){if(!(e="function"==typeof e?e:s[e]))throw new TypeError("invalid easing function");return this._ease=e,this},a.prototype.stop=function(){return this.stopped=!0,this._done=!0,this.emit("stop"),this.emit("end"),this},a.prototype.step=function(){if(!this._done){var e=this._duration,t=Date.now();if(t-this._start>=e)return this._from=this._to,this._update(this._to),this._done=!0,this.emit("end"),this;var n=this._from,a=this._to,r=this._curr,i=this._ease,o=(t-this._start)/e,s=i(o);if(this.isArray){for(var l=0;l<n.length;++l)r[l]=n[l]+(a[l]-n[l])*s;return this._update(r),this}for(var u in n)r[u]=n[u]+(a[u]-n[u])*s;return this._update(r),this}},a.prototype.update=function(e){return 0==arguments.length?this.step():(this._update=e,this)}},1641:function(e,t){function n(e){if(e)return a(e)}function a(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a,r=0;r<n.length;r++)if((a=n[r])===t||a.fn===t){n.splice(r,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var a=0,r=n.length;a<r;++a)n[a].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},1642:function(e,t,n){function a(e){switch(r(e)){case"object":var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=a(e[n]));return t;case"array":for(var t=new Array(e.length),i=0,o=e.length;i<o;i++)t[i]=a(e[i]);return t;case"regexp":var s="";return s+=e.multiline?"m":"",s+=e.global?"g":"",s+=e.ignoreCase?"i":"",new RegExp(e.source,s);case"date":return new Date(e.getTime());default:return e}}var r;try{r=n(1636)}catch(e){r=n(1636)}e.exports=a},1643:function(e,t){t.linear=function(e){return e},t.inQuad=function(e){return e*e},t.outQuad=function(e){return e*(2-e)},t.inOutQuad=function(e){return e*=2,e<1?.5*e*e:-.5*(--e*(e-2)-1)},t.inCube=function(e){return e*e*e},t.outCube=function(e){return--e*e*e+1},t.inOutCube=function(e){return e*=2,e<1?.5*e*e*e:.5*((e-=2)*e*e+2)},t.inQuart=function(e){return e*e*e*e},t.outQuart=function(e){return 1- --e*e*e*e},t.inOutQuart=function(e){return e*=2,e<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},t.inQuint=function(e){return e*e*e*e*e},t.outQuint=function(e){return--e*e*e*e*e+1},t.inOutQuint=function(e){return e*=2,e<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},t.inSine=function(e){return 1-Math.cos(e*Math.PI/2)},t.outSine=function(e){return Math.sin(e*Math.PI/2)},t.inOutSine=function(e){return.5*(1-Math.cos(Math.PI*e))},t.inExpo=function(e){return 0==e?0:Math.pow(1024,e-1)},t.outExpo=function(e){return 1==e?e:1-Math.pow(2,-10*e)},t.inOutExpo=function(e){return 0==e?0:1==e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},t.inCirc=function(e){return 1-Math.sqrt(1-e*e)},t.outCirc=function(e){return Math.sqrt(1- --e*e)},t.inOutCirc=function(e){return e*=2,e<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},t.inBack=function(e){var t=1.70158;return e*e*((t+1)*e-t)},t.outBack=function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},t.inOutBack=function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},t.inBounce=function(e){return 1-t.outBounce(1-e)},t.outBounce=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},t.inOutBounce=function(e){return e<.5?.5*t.inBounce(2*e):.5*t.outBounce(2*e-1)+.5},t["in-quad"]=t.inQuad,t["out-quad"]=t.outQuad,t["in-out-quad"]=t.inOutQuad,t["in-cube"]=t.inCube,t["out-cube"]=t.outCube,t["in-out-cube"]=t.inOutCube,t["in-quart"]=t.inQuart,t["out-quart"]=t.outQuart,t["in-out-quart"]=t.inOutQuart,t["in-quint"]=t.inQuint,t["out-quint"]=t.outQuint,t["in-out-quint"]=t.inOutQuint,t["in-sine"]=t.inSine,t["out-sine"]=t.outSine,t["in-out-sine"]=t.inOutSine,t["in-expo"]=t.inExpo,t["out-expo"]=t.outExpo,t["in-out-expo"]=t.inOutExpo,t["in-circ"]=t.inCirc,t["out-circ"]=t.outCirc,t["in-out-circ"]=t.inOutCirc,t["in-back"]=t.inBack,t["out-back"]=t.outBack,t["in-out-back"]=t.inOutBack,t["in-bounce"]=t.inBounce,t["out-bounce"]=t.outBounce,t["in-out-bounce"]=t.inOutBounce},1644:function(e,t){function n(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-a)),r=setTimeout(e,n);return a=t,r}t=e.exports=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||n;var a=(new Date).getTime(),r=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.clearTimeout;t.cancel=function(e){r.call(window,e)}},1664:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"route",function(){return s});var a=n(0),r=n.n(a),i=n(10),o=n(2),s="/settings/:orgId/",l=[{title:Object(o.t)("General"),fields:[{name:"slug",type:"string",required:!0,label:Object(o.t)("Name"),help:Object(o.t)("A unique ID used to identify this organization"),saveOnBlur:!1,saveMessageAlertType:"info",saveMessage:Object(o.t)("You will be redirected to the new organization slug after saving")},{name:"name",type:"string",required:!0,label:Object(o.t)("Legacy Name"),help:Object(o.tct)("[Deprecated] In the future, only [Name] will be used to identify your organization",{Deprecated:r.a.createElement("strong",null,"DEPRECATED"),Name:r.a.createElement("strong",null,"Name")})},{name:"isEarlyAdopter",type:"boolean",label:Object(o.t)("Early Adopter"),help:Object(o.t)("Opt-in to new features before they're released to the public")}]},{title:"Membership",fields:[{name:"defaultRole",type:"array",required:!0,label:Object(o.t)("Default Role"),choices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.initialData;return t.availableRoles&&t.availableRoles.map(function(e){return[e.id,e.name]})||[]},help:Object(o.t)("The default role new members will receive"),disabled:function(e){return!e.access.has("org:admin")}},{name:"openMembership",type:"boolean",required:!0,label:Object(o.t)("Open Membership"),help:Object(o.t)("Allow organization members to freely join or leave any team")}]},{title:Object(o.t)("Security & Privacy"),fields:[{name:"require2FA",type:"boolean",label:Object(o.t)("Require Two-Factor Authentication"),help:Object(o.t)("Require two-factor authentication for all members"),confirm:{true:Object(o.t)("This will immediately force all users to enable two-factor authentication. It will also send an email reminder to setup two-factor authentication. Do you want to continue?"),false:Object(o.t)("Are you sure you want to allow users to access your organization without having two-factor authentication enabled?")},visible:function(e){return e.features.has("require-2fa")}},{name:"allowSharedIssues",type:"boolean",label:Object(o.t)("Allow Shared Issues"),help:Object(o.t)("Enable sharing of limited details on issues to anonymous users"),confirm:{true:Object(o.t)("Are you sure you want to allow sharing issues to anonymous users?")}},{name:"enhancedPrivacy",type:"boolean",label:Object(o.t)("Enhanced Privacy"),help:Object(o.t)("Enable enhanced privacy controls to limit personally identifiable information (PII) as well as source code in things like notifications"),confirm:{false:Object(o.t)("Disabling this can have privacy implications for ALL projects, are you sure you want to continue?")}},{name:"dataScrubber",type:"boolean",label:Object(o.t)("Require Data Scrubber"),help:Object(o.t)("Require server-side data scrubbing be enabled for all projects"),confirm:{false:Object(o.t)("Disabling this can have privacy implications for ALL projects, are you sure you want to continue?")}},{name:"dataScrubberDefaults",type:"boolean",label:Object(o.t)("Require Using Default Scrubbers"),help:Object(o.t)("Require the default scrubbers be applied to prevent things like passwords and credit cards from being stored for all projects"),confirm:{false:Object(o.t)("Disabling this can have privacy implications for ALL projects, are you sure you want to continue?")}},{name:"sensitiveFields",type:"string",multiline:!0,placeholder:"e.g. email",label:Object(o.t)("Global sensitive fields"),help:Object(o.t)("Additional field names to match against when scrubbing data for all projects. Separate multiple entries with a newline."),extraHelp:Object(o.t)("Note: These fields will be used in addition to project specific fields."),getValue:function(e){return Object(i.h)(e)},setValue:function(e){return e&&"function"==typeof e.join&&e.join("\n")||""}},{name:"safeFields",type:"string",multiline:!0,placeholder:Object(o.t)("e.g. business-email"),label:Object(o.t)("Global safe fields"),help:Object(o.t)("Field names which data scrubbers should ignore. Separate multiple entries with a newline."),extraHelp:Object(o.t)("Note: These fields will be used in addition to project specific fields"),getValue:function(e){return Object(i.h)(e)},setValue:function(e){return e&&"function"==typeof e.join&&e.join("\n")||""}},{name:"scrubIPAddresses",type:"boolean",label:Object(o.t)("Prevent Storing of IP Addresses"),help:Object(o.t)("Preventing IP addresses from being stored for new events on all projects"),confirm:{false:Object(o.t)("Disabling this can have privacy implications for ALL projects, are you sure you want to continue?")}}]}];t.default=l},1701:function(e,t,n){"use strict";var a=n(1),r=n.n(a),i=n(0),o=n.n(i),s=n(3),l=n.n(s),u=n(5),c=n(18),f=n(80),p=n(2),d=n(8),h=n(32),m=n(614),b=n(26),g=n(71),v=n(15),y=n(11),O=n(613),j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},w=l()({displayName:"AvatarChooser",propTypes:{endpoint:r.a.string.isRequired,allowGravatar:r.a.bool,allowLetter:r.a.bool,allowUpload:r.a.bool,type:r.a.oneOf(["user","team","organization","project"]),model:r.a.shape({avatar:r.a.shape({avatarType:r.a.oneOf(["upload","letter_avatar","gravatar"])})}),isUser:r.a.bool,savedDataUrl:r.a.string,onSave:r.a.func},mixins:[d.default],getDefaultProps:function(){return{allowGravatar:!0,allowLetter:!0,allowUpload:!0,onSave:function(){}}},getInitialState:function(){return{model:this.props.model,savedDataUrl:null,dataUrl:null,hasError:!1}},componentWillReceiveProps:function(e){void 0!==e.model&&this.setState({model:e.model})},updateState:function(e){this.setState({model:e})},updateDataUrlState:function(e){this.setState(e)},handleError:function(e){Object(f.a)(e)},handleSuccess:function(e){var t=this.props.onSave;this.setState({model:e}),t(e),Object(f.d)(Object(p.t)("Successfully saved avatar preferences"))},handleSaveSettings:function(e){var t=this,n=this.props.endpoint,a=this.state,r=a.model,i=a.dataUrl;e.preventDefault();var o={},s=r&&r.avatar?r.avatar.avatarType:void 0;o={avatar_photo:i?i.split(",")[1]:null,avatar_type:s},this.api.request(n,{method:"PUT",data:o,success:function(e){t.setState({savedDataUrl:t.state.dataUrl}),t.handleSuccess(e)},error:this.handleError.bind(this,"There was an error saving your preferences.")})},handleChange:function(e){var t=j({},this.state.model);t.avatar.avatarType=e,this.updateState(t)},render:function(){var e=this,t=this.props,n=t.allowGravatar,a=t.allowUpload,r=t.allowLetter,i=t.savedDataUrl,s=t.type,l=t.isUser,u=this.state,f=u.hasError,d=u.model;if(f)return o.a.createElement(v.default,null);if(!d)return o.a.createElement(y.default,null);var w=d.avatar&&d.avatar.avatarType||"letter_avatar",k="letter_avatar"===w,x="team"===s,D="organization"===s,P="project"===s,q=[];return r&&q.push(["letter_avatar","Use initials"]),a&&q.push(["upload","Upload an image"]),n&&q.push(["gravatar","Use Gravatar"]),o.a.createElement(c.a,null,o.a.createElement(c.e,null,"Avatar"),o.a.createElement(c.c,null,o.a.createElement(S,null,o.a.createElement(E,{inline:k},o.a.createElement(O.a,{style:{flex:1},choices:q,value:w,label:"Avatar Type",onChange:function(t){return e.handleChange(t)}}),k&&o.a.createElement(h.a,{gravatar:!1,style:{width:90,height:90},user:l?d:null,organization:D?d:null,project:P?d:null,team:x?d:null})),o.a.createElement(T,null,n&&"gravatar"===w&&o.a.createElement("div",{className:"well"},Object(p.t)("Gravatars are managed through "),o.a.createElement(g.a,{href:"http://gravatar.com"},"Gravatar.com")),"upload"===w&&o.a.createElement(m.a,j({},this.props,{model:d,savedDataUrl:i,updateDataUrlState:this.updateDataUrlState})),o.a.createElement(_,{className:"form-actions"},o.a.createElement(b.default,{type:"button",priority:"primary",onClick:this.handleSaveSettings},Object(p.t)("Save Avatar")))))))}}),E=Object(u.default)("div",{target:"el5z31b0"})("display:flex;flex-direction:",function(e){return e.inline?"row":"column"},";"),S=Object(u.default)("div",{target:"el5z31b1"})("line-height:1.5em;padding:1em 1.25em;"),_=Object(u.default)("fieldset",{target:"el5z31b2"})("display:flex;justify-content:flex-end;margin-top:1em;"),T=Object(u.default)("div",{target:"el5z31b3"})("margin-top:1em;");t.a=w},1790:function(e,t,n){"use strict";var a=n(14),r=n(1),i=n.n(r),o=n(0),s=n.n(o),l=n(3),u=n.n(l),c=n(80),f=n(401),p=n(8),d=n(1701),h=n(600),m=n(1637),b=n(1664),g=n(39),v=u()({displayName:"OrganizationSettingsForm",propTypes:{location:i.a.object,orgId:i.a.string.isRequired,access:i.a.object.isRequired,initialData:i.a.object.isRequired,onSave:i.a.func.isRequired},mixins:[p.default,g.a],render:function(){var e=this.props,t=e.initialData,n=e.orgId,r=e.onSave,i=e.access,o="/organizations/"+n+"/";return s.a.createElement(h.a,{className:"ref-organization-settings",apiMethod:"PUT",apiEndpoint:o,saveOnBlur:!0,allowUndo:!0,initialData:t,onSubmitSuccess:function(e,n,a,i){"function"==typeof r&&r(t,n.initialData)},onSubmitError:function(e){return e.responseJSON&&"require2FA"in e.responseJSON?Object(c.a)("Unable to save change. Enable two-factor authentication on your account first."):Object(c.a)("Unable to save change")}},s.a.createElement(a.Box,null,s.a.createElement(m.a,{features:this.getFeatures(),access:i,location:this.props.location,forms:b.default}),s.a.createElement(d.a,{type:"organization",allowGravatar:!1,endpoint:o+"avatar/",model:t,onSave:f.e})))}});t.a=v},645:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),r=n(1),i=n.n(r),o=n(0),s=n.n(o),l=n(3),u=n.n(l),c=n(18),f=n(80),p=n(401),d=n(2),h=n(8),m=n(602),b=n(183),g=n(15),v=n(11),y=n(52),O=n(81),j=n(148),w=n(1790),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},S=function(){function e(e,t){var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_=u()({displayName:"OrganizationGeneralSettings",propTypes:{routes:i.a.arrayOf(i.a.object)},mixins:[h.default],getInitialState:function(){return{loading:!0,error:!1,data:null}},componentDidMount:function(){var e=this;Promise.all([this.fetchData()]).then(function(t){var n=S(t,1),r=n[0];if(r&&-1===r.access.indexOf("org:admin")&&-1===r.access.indexOf("org:write"))return void a.browserHistory.replace(Object(j.a)("teams",{params:e.props.params,routes:e.props.routes,stepBack:-1}));e.setState({data:r,loading:!1})},function(){e.setState({error:!0,loading:!1})})},fetchData:function(){var e=this;return new Promise(function(t,n){e.api.request("/organizations/"+e.props.params.orgId+"/",{method:"GET",success:function(e){t(e)},error:function(){n()}})})},handleRemoveOrganization:function(){var e=this.state||{},t=e.data;t&&(Object(f.b)(),Object(p.c)(this.api,{orgId:this.props.params.orgId,successMessage:t.name+" is queued for deletion.",errorMessage:"Error removing the "+(t&&t.name)+" organization"}))},handleSave:function(e,t){t.slug&&t.slug!==e.slug?(Object(p.a)(e,t),a.browserHistory.replace("/settings/"+t.slug+"/")):(this.setState({data:t}),Object(p.e)(t))},render:function(){var e=this.state,t=e.data,n=e.loading,a=e.error,r=this.props.params.orgId,i=t&&new Set(t.access),o=t&&t.projects&&!!t.projects.length;return s.a.createElement("div",null,a&&s.a.createElement(g.default,null),n&&!a&&s.a.createElement(v.default,null),t&&!n&&!a&&s.a.createElement("div",null,s.a.createElement(y.default,{title:Object(d.t)("Organization Settings")}),s.a.createElement(w.a,E({},this.props,{initialData:t,orgId:r,access:i,onSave:this.handleSave})),i.has("org:admin")&&!t.isDefault&&s.a.createElement(c.a,null,s.a.createElement(c.e,null,Object(d.t)("Remove Organization")),s.a.createElement(m.a,{label:Object(d.t)("Remove Organization"),help:Object(d.t)("Removing this organization will delete all data including projects and their associated events.")},s.a.createElement("div",null,s.a.createElement(b.a,{className:"btn btn-danger",priority:"danger",size:"small",title:Object(d.t)("Remove %s organization",t&&t.name),message:s.a.createElement("div",null,s.a.createElement(O.default,null,Object(d.tct)("Removing the organization, [name] is permanent and cannot be undone! Are you sure you want to continue?",{name:t&&s.a.createElement("strong",null,t.name)})),o&&s.a.createElement("div",null,s.a.createElement(O.default,{noMargin:!0},Object(d.t)("This will also remove the following associated projects:")),s.a.createElement("ul",{className:"ref-projects"},t.projects.map(function(e){return s.a.createElement("li",{key:e.slug},e.slug)})))),onConfirm:this.handleRemoveOrganization},Object(d.t)("Remove Organization")))))))}});t.default=_}});
//# sourceMappingURL=0.js.map