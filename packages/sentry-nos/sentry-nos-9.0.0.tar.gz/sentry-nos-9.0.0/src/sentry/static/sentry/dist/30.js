webpackJsonpexports([30],{1613:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a.n(n),o=a(0),i=a.n(o),s=a(3),c=a.n(s),l=a(7),u=a.n(l),m=a(180),f=a(10),p=a(8),b=a(39),h=a(179),g=a(150),d=a(1802),j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},O=c()({displayName:"OrganizationTeamsContainer",propTypes:{routes:r.a.arrayOf(r.a.object)},mixins:[p.default,b.a,u.a.listenTo(g.a,"onTeamListChange"),u.a.listenTo(h.a,"onProjectListChange")],getInitialState:function(){return{teamList:Object(f.q)(g.a.getAll(),function(e){return e&&e.name}),projectList:Object(f.q)(h.a.getAll(),function(e){return e&&e.name}),projectStats:{}}},componentDidMount:function(){this.fetchStats()},fetchStats:function(){Object(m.c)(this.api,{orgId:this.props.params.orgId,query:{since:(new Date).getTime()/1e3-86400,stat:"generated",group:"project"}})},onTeamListChange:function(){var e=g.a.getAll();this.setState({teamList:Object(f.q)(e,function(e){return e.name})})},onProjectListChange:function(){var e=h.a.getAll();this.setState({projectList:Object(f.q)(e,function(e){return e.name})})},render:function(){if(!this.context.organization)return null;var e=this.getAccess(),t=this.getFeatures(),a=this.getOrganization(),n=this.state.teamList,r=this.state.teamList.filter(function(e){return e.isMember});return i.a.createElement(d.a,j({},this.props,{access:e,features:t,organization:a,projectList:this.state.projectList,allTeams:n,activeTeams:r}))}});t.default=O},1802:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c=a(1),l=a.n(c),u=a(0),m=a.n(u),f=a(39),p=a(104),b=a(2),h=a(26),g=a(18),d=a(6),j=a(52),O=a(148),y=a(1803),v=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),T=(s=i=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),v(t,[{key:"render",value:function(){var e=this.props,t=e.allTeams,a=e.activeTeams,n=e.organization,r=e.access,o=e.features,i=e.routes,s=e.params,c=n;if(!n)return null;var l=Object(f.b)(n).getAccess().has("project:admin"),u=m.a.createElement(h.default,{priority:"primary",size:"small",disabled:!l,title:l?void 0:Object(b.t)("You do not have permission to create teams"),onClick:function(){return Object(p.d)({organization:n})},icon:"icon-circle-add"},Object(b.t)("Create Team")),d=i.find(function(e){return"teams/"===e.path}),v=Object(O.a)(d,{routes:i,params:s,stepBack:-1}),T=new Set(a.map(function(e){return e.id})),E=t.filter(function(e){return!T.has(e.id)});return m.a.createElement("div",{className:"team-list"},m.a.createElement(j.default,{title:Object(b.t)("Teams"),action:u}),m.a.createElement(g.a,null,m.a.createElement(g.e,null,Object(b.t)("Your Teams")),m.a.createElement(g.c,null,m.a.createElement(y.a,{useCreateModal:!0,urlPrefix:v,organization:c,teamList:a,access:r,openMembership:!1}))),m.a.createElement(g.a,null,m.a.createElement(g.e,null,Object(b.t)("Other Teams")),m.a.createElement(g.c,null,m.a.createElement(y.a,{useCreateModal:!0,urlPrefix:v,organization:c,teamList:E,access:r,openMembership:!(!o.has("open-membership")&&!r.has("org:write"))}))))}}]),t}(m.a.Component),i.propTypes={allTeams:l.a.arrayOf(d.e.Team),activeTeams:l.a.arrayOf(d.e.Team),organization:d.e.Organization,access:l.a.object,features:l.a.object,routes:l.a.array,params:l.a.object},s);t.a=T},1803:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c=a(9),l=a(1),u=a.n(l),m=a(0),f=a.n(m),p=a(104),b=a(2),h=a(178),g=a(6),d=a(81),j=a(1804),O=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),y=(s=i=function(e){function t(){var e,a,o,i;n(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return a=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),o.handleCreateTeam=function(e){var t=o.props,a=t.useCreateModal,n=t.organization;a&&(e.preventDefault(),Object(p.d)({organization:n,onClose:function(){}}))},i=a,r(o,i)}return o(t,e),O(t,[{key:"render",value:function(){var e=this.props,t=e.access,a=e.organization,n=e.urlPrefix,r=e.openMembership,o=e.useCreateModal,i=this.props.teamList.map(function(e,o){return f.a.createElement(j.a,{urlPrefix:n,access:t,team:e,organization:a,openMembership:r,key:e.slug})});if(0!==i.length)return i;var s=o?"#":"/organizations/"+a.slug+"/teams/new/";return f.a.createElement(h.a,null,Object(b.tct)("No teams here. You can always [link:create one].",{root:f.a.createElement(d.default,{noMargin:!0}),link:f.a.createElement(c.Link,{to:s,onClick:this.handleCreateTeam})}))}}]),t}(f.a.Component),i.propTypes={urlPrefix:u.a.string,access:u.a.object,organization:g.e.Organization,teamList:u.a.arrayOf(g.e.Team),openMembership:u.a.bool,useCreateModal:u.a.bool},s);t.a=y},1804:function(e,t,a){"use strict";var n=a(14),r=a(9),o=a(1),i=a.n(o),s=a(0),c=a.n(s),l=a(3),u=a.n(l),m=a(80),f=a(607),p=a(2),b=a(8),h=a(18),g=a(267),d=u()({displayName:"AllTeamsRow",propTypes:{urlPrefix:i.a.string.isRequired,access:i.a.object.isRequired,organization:i.a.object.isRequired,team:i.a.object.isRequired,openMembership:i.a.bool.isRequired},mixins:[b.default],getInitialState:function(){return{loading:!1,error:!1}},joinTeam:function(){var e=this,t=this.props,a=t.organization,n=t.team;this.setState({loading:!0}),Object(f.c)(this.api,{orgId:a.slug,teamId:n.slug},{success:function(){e.setState({loading:!1,error:!1}),Object(m.d)(Object(p.tct)("You have joined [team]",{team:"#"+n.slug}))},error:function(){e.setState({loading:!1,error:!0}),Object(m.a)(Object(p.tct)("Unable to join [team]",{team:"#"+n.slug}))}})},leaveTeam:function(){var e=this,t=this.props,a=t.organization,n=t.team;this.setState({loading:!0}),Object(f.d)(this.api,{orgId:a.slug,teamId:n.slug},{success:function(){e.setState({loading:!1,error:!1}),Object(m.d)(Object(p.tct)("You have left [team]",{team:"#"+n.slug}))},error:function(){e.setState({loading:!1,error:!0}),Object(m.a)(Object(p.tct)("Unable to leave [team]",{team:"#"+n.slug}))}})},render:function(){var e=this.props,t=e.access,a=e.team,o=e.urlPrefix,i=e.openMembership,s=e.organization,l=new Set(s.features),u=l.has("new-teams")?c.a.createElement(g.a,{team:a}):a.name;return c.a.createElement(h.f,{p:0,align:"center"},c.a.createElement(n.Box,{flex:"1",p:2},t.has("team:write")?c.a.createElement(r.Link,{to:o+"teams/"+a.slug+"/"},u):u),c.a.createElement(n.Box,{p:2},this.state.loading?c.a.createElement("a",{className:"btn btn-default btn-sm btn-loading btn-disabled"},"..."):a.isMember?c.a.createElement("a",{className:"leave-team btn btn-default btn-sm",onClick:this.leaveTeam},Object(p.t)("Leave Team")):a.isPending?c.a.createElement("a",{className:"btn btn-default btn-sm btn-disabled"},Object(p.t)("Request Pending")):i?c.a.createElement("a",{className:"btn btn-default btn-sm",onClick:this.joinTeam},Object(p.t)("Join Team")):c.a.createElement("a",{className:"btn btn-default btn-sm",onClick:this.joinTeam},Object(p.t)("Request Access"))))}});t.a=d}});
//# sourceMappingURL=30.js.map