
<link rel="import" href="/static/bower_components/polymer/polymer.html">
<link rel="import" href="/static/bower_components/iron-validator-behavior/iron-validator-behavior.html">

<dom-module id="neurons-moment-validator">
  <script>
    Polymer({
      is: 'neurons-moment-validator',

      behaviors: [
        Polymer.IronValidatorBehavior
      ],

      properties: {
        format: {
          type: String,
          value: null,
          reflectToAttribute: true
        }
        ,required: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        }
      },

      validate: function(value) {
        if (this.format === null) {
          throw new Error("Set format attribute before validation!")
        }
        if (value.length === 0) {
          return (! this.required);
        }

        return moment(value, this.format, true).isValid();
      }
    });
  </script>
</dom-module>
